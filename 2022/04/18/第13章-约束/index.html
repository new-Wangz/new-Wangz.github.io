<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="1. çº¦æŸ(constraint)æ¦‚è¿°">
<meta property="og:type" content="article">
<meta property="og:title" content="ç¬¬13ç« _çº¦æŸ">
<meta property="og:url" content="http://example.com/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/index.html">
<meta property="og:site_name" content="W Z B L O G">
<meta property="og:description" content="1. çº¦æŸ(constraint)æ¦‚è¿°">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/1650270930136.png">
<meta property="og:image" content="http://example.com/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/1650271354207.png">
<meta property="og:image" content="http://example.com/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/1650271961132.png">
<meta property="og:image" content="http://example.com/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/1650272932586.png">
<meta property="article:published_time" content="2022-04-18T08:19:27.000Z">
<meta property="article:modified_time" content="2022-04-18T10:05:45.340Z">
<meta property="article:author" content="Wang Zhen">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/1650270930136.png">

<link rel="canonical" href="http://example.com/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>ç¬¬13ç« _çº¦æŸ | W Z B L O G</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">W Z B L O G</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">âš½</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png#/images/avatar.gif">
      <meta itemprop="name" content="Wang Zhen">
      <meta itemprop="description" content="è¯·å‡ºç¤ºè¡Œç¨‹ç ã€å¥åº·ç ï¼Œé…æˆ´å¥½å£ç½©æµè§ˆæœ¬ç«™ğŸ˜œ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="W Z B L O G">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ç¬¬13ç« _çº¦æŸ
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-18 16:19:27 / ä¿®æ”¹æ—¶é—´ï¼š18:05:45" itemprop="dateCreated datePublished" datetime="2022-04-18T16:19:27+08:00">2022-04-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯åšå®¢</span></a>
                </span>
            </span>

          
            <span id="/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/" class="post-meta-item leancloud_visitors" data-flag-title="ç¬¬13ç« _çº¦æŸ" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="1-çº¦æŸ-constraint-æ¦‚è¿°"><a href="#1-çº¦æŸ-constraint-æ¦‚è¿°" class="headerlink" title="1. çº¦æŸ(constraint)æ¦‚è¿°"></a>1. çº¦æŸ(constraint)æ¦‚è¿°<span id="more"></span></h2><hr>
<h3 id="1-1-ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸ"><a href="#1-1-ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸ" class="headerlink" title="1. 1 ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸ"></a>1. 1 ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸ</h3><p>æ•°æ®å®Œæ•´æ€§ï¼ˆData Integrityï¼‰æ˜¯æŒ‡æ•°æ®çš„ç²¾ç¡®æ€§ï¼ˆAccuracyï¼‰å’Œå¯é æ€§ï¼ˆReliabilityï¼‰ã€‚å®ƒæ˜¯é˜²æ­¢æ•°æ®åº“ä¸­å­˜åœ¨ä¸ç¬¦åˆè¯­ä¹‰è§„å®šçš„æ•°æ®å’Œé˜²æ­¢å› é”™è¯¯ä¿¡æ¯çš„è¾“å…¥è¾“å‡ºé€ æˆæ— æ•ˆæ“ä½œæˆ–é”™è¯¯ä¿¡æ¯è€Œæå‡ºçš„ã€‚</p>
<p>ä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼ŒSQLè§„èŒƒä»¥çº¦æŸçš„æ–¹å¼å¯¹<strong>è¡¨æ•°æ®è¿›è¡Œé¢å¤–çš„æ¡ä»¶é™åˆ¶</strong>ã€‚ä»ä»¥ä¸‹å››ä¸ªæ–¹é¢è€ƒè™‘ï¼š</p>
<ul>
<li><code>å®ä½“å®Œæ•´æ€§ï¼ˆEntity Integrityï¼‰</code>ï¼šä¾‹å¦‚ï¼ŒåŒä¸€ä¸ªè¡¨ä¸­ï¼Œä¸èƒ½å­˜åœ¨ä¸¤æ¡å®Œå…¨ç›¸åŒæ— æ³•åŒºåˆ†çš„è®°å½•</li>
<li><code>åŸŸå®Œæ•´æ€§ï¼ˆDomain Integrityï¼‰</code>ï¼šä¾‹å¦‚ï¼šå¹´é¾„èŒƒå›´0-120ï¼Œæ€§åˆ«èŒƒå›´â€œç”·&#x2F;å¥³â€</li>
<li><code>å¼•ç”¨å®Œæ•´æ€§ï¼ˆReferential Integrityï¼‰</code>ï¼šä¾‹å¦‚ï¼šå‘˜å·¥æ‰€åœ¨éƒ¨é—¨ï¼Œåœ¨éƒ¨é—¨è¡¨ä¸­è¦èƒ½æ‰¾åˆ°è¿™ä¸ªéƒ¨é—¨</li>
<li><code>ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§ï¼ˆUser-defined Integrityï¼‰</code>ï¼šä¾‹å¦‚ï¼šç”¨æˆ·åå”¯ä¸€ã€å¯†ç ä¸èƒ½ä¸ºç©ºç­‰ï¼Œæœ¬éƒ¨é—¨ç»ç†çš„å·¥èµ„ä¸å¾—é«˜äºæœ¬éƒ¨é—¨èŒå·¥çš„å¹³å‡å·¥èµ„çš„ 5 å€ã€‚</li>
</ul>
<h2 id="1-2-ä»€ä¹ˆæ˜¯çº¦æŸ"><a href="#1-2-ä»€ä¹ˆæ˜¯çº¦æŸ" class="headerlink" title="1. 2 ä»€ä¹ˆæ˜¯çº¦æŸ"></a>1. 2 ä»€ä¹ˆæ˜¯çº¦æŸ</h2><p>çº¦æŸæ˜¯è¡¨çº§çš„å¼ºåˆ¶è§„å®šã€‚</p>
<p>å¯ä»¥åœ¨ <strong>åˆ›å»ºè¡¨æ—¶è§„å®šçº¦æŸï¼ˆé€šè¿‡ CREATE TABLE è¯­å¥ï¼‰</strong> ï¼Œæˆ–è€…åœ¨ <strong>è¡¨åˆ›å»ºä¹‹åé€šè¿‡ ALTER TABLE è¯­å¥è§„å®šçº¦æŸ</strong> ã€‚</p>
<h3 id="1-3-çº¦æŸçš„åˆ†ç±»"><a href="#1-3-çº¦æŸçš„åˆ†ç±»" class="headerlink" title="1. 3 çº¦æŸçš„åˆ†ç±»"></a>1. 3 çº¦æŸçš„åˆ†ç±»</h3><ul>
<li><p>æ ¹æ®çº¦æŸæ•°æ®åˆ—çš„é™åˆ¶ï¼Œ çº¦æŸå¯åˆ†ä¸ºï¼š</p>
<ul>
<li>å•åˆ—çº¦æŸ ï¼šæ¯ä¸ªçº¦æŸåªçº¦æŸä¸€åˆ—</li>
<li>å¤šåˆ—çº¦æŸ ï¼šæ¯ä¸ªçº¦æŸå¯çº¦æŸå¤šåˆ—æ•°æ®</li>
</ul>
</li>
<li><p>æ ¹æ®çº¦æŸçš„ä½œç”¨èŒƒå›´ ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š</p>
<ul>
<li>åˆ—çº§çº¦æŸ ï¼šåªèƒ½ä½œç”¨åœ¨ä¸€ä¸ªåˆ—ä¸Šï¼Œè·Ÿåœ¨åˆ—çš„å®šä¹‰åé¢</li>
<li>è¡¨çº§çº¦æŸ ï¼šå¯ä»¥ä½œç”¨åœ¨å¤šä¸ªåˆ—ä¸Šï¼Œä¸ä¸åˆ—ä¸€èµ·ï¼Œè€Œæ˜¯å•ç‹¬å®šä¹‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">			ä½ç½®			æ”¯æŒçš„çº¦æŸç±»å‹					æ˜¯å¦å¯ä»¥èµ·çº¦æŸå</span><br><span class="line">åˆ—çº§çº¦æŸï¼š	åˆ—çš„åé¢		è¯­æ³•éƒ½æ”¯æŒï¼Œä½†å¤–é”®æ²¡æœ‰æ•ˆæœ		ä¸å¯ä»¥</span><br><span class="line">è¡¨çº§çº¦æŸï¼š	æ‰€æœ‰åˆ—çš„ä¸‹é¢	é»˜è®¤å’Œéç©ºä¸æ”¯æŒï¼Œå…¶ä»–æ”¯æŒ		å¯ä»¥ï¼ˆä¸»é”®æ²¡æœ‰æ•ˆæœï¼‰</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ ¹æ®çº¦æŸèµ·çš„ä½œç”¨ ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š</p>
<ul>
<li>NOT NULL éç©ºçº¦æŸï¼Œè§„å®šæŸä¸ªå­—æ®µä¸èƒ½ä¸ºç©º</li>
<li>UNIQUE å”¯ä¸€çº¦æŸ ï¼Œ è§„å®šæŸä¸ªå­—æ®µåœ¨æ•´ä¸ªè¡¨ä¸­æ˜¯å”¯ä¸€çš„</li>
<li>PRIMARY KEY ä¸»é”®(éç©ºä¸”å”¯ä¸€)çº¦æŸ</li>
<li>FOREIGN KEY å¤–é”®çº¦æŸ</li>
<li>CHECK æ£€æŸ¥çº¦æŸ</li>
<li>DEFAULT é»˜è®¤å€¼çº¦æŸ</li>
</ul>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š MySQLä¸æ”¯æŒcheckçº¦æŸï¼Œä½†å¯ä»¥ä½¿ç”¨checkçº¦æŸï¼Œè€Œæ²¡æœ‰ä»»ä½•æ•ˆæœ</p>
</blockquote>
<ul>
<li><p>æŸ¥çœ‹æŸä¸ªè¡¨å·²æœ‰çš„çº¦æŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#information_schemaæ•°æ®åº“åï¼ˆç³»ç»Ÿåº“ï¼‰</span><br><span class="line">#table_constraintsè¡¨åç§°ï¼ˆä¸“é—¨å­˜å‚¨å„ä¸ªè¡¨çš„çº¦æŸï¼‰</span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;è¡¨åç§°&#x27;;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="2-éç©ºçº¦æŸ"><a href="#2-éç©ºçº¦æŸ" class="headerlink" title="2. éç©ºçº¦æŸ"></a>2. éç©ºçº¦æŸ</h2><hr>
<h3 id="2-1-ä½œç”¨"><a href="#2-1-ä½œç”¨" class="headerlink" title="2. 1 ä½œç”¨"></a>2. 1 ä½œç”¨</h3><p>é™å®šæŸä¸ªå­—æ®µ&#x2F;æŸåˆ—çš„å€¼ä¸å…è®¸ä¸ºç©º</p>
<p><img src="/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/1650270930136.png" alt="1650270930136"></p>
<h3 id="2-2-å…³é”®å­—"><a href="#2-2-å…³é”®å­—" class="headerlink" title="2. 2 å…³é”®å­—"></a>2. 2 å…³é”®å­—</h3><p>NOT NULL</p>
<h3 id="2-3-ç‰¹ç‚¹"><a href="#2-3-ç‰¹ç‚¹" class="headerlink" title="2. 3 ç‰¹ç‚¹"></a>2. 3 ç‰¹ç‚¹</h3><ul>
<li>é»˜è®¤ï¼Œæ‰€æœ‰çš„ç±»å‹çš„å€¼éƒ½å¯ä»¥æ˜¯NULLï¼ŒåŒ…æ‹¬INTã€FLOATç­‰æ•°æ®ç±»å‹</li>
<li>éç©ºçº¦æŸåªèƒ½å‡ºç°åœ¨è¡¨å¯¹è±¡çš„åˆ—ä¸Šï¼Œåªèƒ½æŸä¸ªåˆ—å•ç‹¬é™å®šéç©ºï¼Œä¸èƒ½ç»„åˆéç©º</li>
<li>ä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¾ˆå¤šåˆ—éƒ½åˆ†åˆ«é™å®šäº†éç©º</li>
<li>ç©ºå­—ç¬¦ä¸²â€™â€™ä¸ç­‰äºNULLï¼Œ 0 ä¹Ÿä¸ç­‰äºNULL</li>
</ul>
<h3 id="2-4-æ·»åŠ éç©ºçº¦æŸ"><a href="#2-4-æ·»åŠ éç©ºçº¦æŸ" class="headerlink" title="2. 4 æ·»åŠ éç©ºçº¦æŸ"></a>2. 4 æ·»åŠ éç©ºçº¦æŸ</h3><p>(1) å»ºè¡¨æ—¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE è¡¨åç§°(</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹ NOT NULL,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹ NOT NULL</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp(</span><br><span class="line">id INT( 10 ) NOT NULL,</span><br><span class="line">NAME VARCHAR( 20 ) NOT NULL,</span><br><span class="line">sex CHAR NULL</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE student(</span><br><span class="line">	sid int,</span><br><span class="line">	sname varchar( 20 ) not null,</span><br><span class="line">	tel char( 11 ) ,</span><br><span class="line">	cardid char( 18 ) not null</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 1 ,&#x27;å¼ ä¸‰&#x27;,&#x27;13710011002&#x27;,&#x27;110222198912032545&#x27;); #æˆåŠŸ</span><br><span class="line"></span><br><span class="line">insert into student values( 2 ,&#x27;æå››&#x27;,&#x27;13710011002&#x27;,null);#èº«ä»½è¯å·ä¸ºç©º</span><br><span class="line">ERROR 1048 ( 23000 ): Column &#x27;cardid&#x27; cannot be null</span><br><span class="line"></span><br><span class="line">insert into student values(2,&#x27;æå››&#x27;,null,&#x27;110222198912032546&#x27;);#æˆåŠŸï¼Œtelå…è®¸ä¸ºç©º</span><br><span class="line"></span><br><span class="line">insert into student values( 3 ,null,null,&#x27;110222198912032547&#x27;);#å¤±è´¥</span><br><span class="line">ERROR 1048 ( 23000 ): Column &#x27;sname&#x27; cannot be null</span><br></pre></td></tr></table></figure>

<p>(2) å»ºè¡¨å</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ not null;</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">MODIFY sex VARCHAR( 30 ) NOT NULL;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student modify sname varchar( 20 ) not null;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-åˆ é™¤éç©ºçº¦æŸ"><a href="#2-5-åˆ é™¤éç©ºçº¦æŸ" class="headerlink" title="2. 5 åˆ é™¤éç©ºçº¦æŸ"></a>2. 5 åˆ é™¤éç©ºçº¦æŸ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ NULL;#å»æ‰not nullï¼Œç›¸å½“äºä¿®æ”¹æŸä¸ªéæ³¨è§£å­—æ®µï¼Œè¯¥å­—æ®µå…è®¸ä¸ºç©º</span><br><span class="line"></span><br><span class="line">æˆ–</span><br><span class="line"></span><br><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹;#å»æ‰not nullï¼Œç›¸å½“äºä¿®æ”¹æŸä¸ªéæ³¨è§£å­—æ®µï¼Œè¯¥å­—æ®µå…è®¸ä¸ºç©º</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">MODIFY sex VARCHAR( 30 ) NULL;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">MODIFY NAME VARCHAR( 15 ) DEFAULT &#x27;abc&#x27; NULL;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-å”¯ä¸€æ€§çº¦æŸ"><a href="#3-å”¯ä¸€æ€§çº¦æŸ" class="headerlink" title="3. å”¯ä¸€æ€§çº¦æŸ"></a>3. å”¯ä¸€æ€§çº¦æŸ</h2><hr>
<h3 id="3-1-ä½œç”¨"><a href="#3-1-ä½œç”¨" class="headerlink" title="3. 1 ä½œç”¨"></a>3. 1 ä½œç”¨</h3><p>ç”¨æ¥é™åˆ¶æŸä¸ªå­—æ®µ&#x2F;æŸåˆ—çš„å€¼ä¸èƒ½é‡å¤ã€‚</p>
<p><img src="/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/1650271354207.png" alt="1650271354207"></p>
<h3 id="3-2-å…³é”®å­—"><a href="#3-2-å…³é”®å­—" class="headerlink" title="3. 2 å…³é”®å­—"></a>3. 2 å…³é”®å­—</h3><p>UNIQUE</p>
<h3 id="3-3-ç‰¹ç‚¹"><a href="#3-3-ç‰¹ç‚¹" class="headerlink" title="3. 3 ç‰¹ç‚¹"></a>3. 3 ç‰¹ç‚¹</h3><ul>
<li>åŒä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€çº¦æŸã€‚</li>
<li>å”¯ä¸€çº¦æŸå¯ä»¥æ˜¯æŸä¸€ä¸ªåˆ—çš„å€¼å”¯ä¸€ï¼Œä¹Ÿå¯ä»¥å¤šä¸ªåˆ—ç»„åˆçš„å€¼å”¯ä¸€ã€‚</li>
<li>å”¯ä¸€æ€§çº¦æŸå…è®¸åˆ—å€¼ä¸ºç©ºã€‚</li>
<li>åœ¨åˆ›å»ºå”¯ä¸€çº¦æŸçš„æ—¶å€™ï¼Œå¦‚æœä¸ç»™å”¯ä¸€çº¦æŸå‘½åï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒã€‚</li>
<li><strong>MySQLä¼šç»™å”¯ä¸€çº¦æŸçš„åˆ—ä¸Šé»˜è®¤åˆ›å»ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ã€‚</strong></li>
</ul>
<h3 id="3-4-æ·»åŠ å”¯ä¸€çº¦æŸ"><a href="#3-4-æ·»åŠ å”¯ä¸€çº¦æŸ" class="headerlink" title="3. 4 æ·»åŠ å”¯ä¸€çº¦æŸ"></a>3. 4 æ·»åŠ å”¯ä¸€çº¦æŸ</h3><p>(1) å»ºè¡¨æ—¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹ unique,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹ unique key,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹</span><br><span class="line">);</span><br><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	[constraint çº¦æŸå] unique key(å­—æ®µå)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">	sid int,</span><br><span class="line">	sname varchar( 20 ),</span><br><span class="line">	tel char( 11 ) unique,</span><br><span class="line">	cardid char( 18 ) unique key</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE t_course(</span><br><span class="line">	cid INT UNIQUE,</span><br><span class="line">	cname VARCHAR( 100 ) UNIQUE,</span><br><span class="line">	description VARCHAR( 200 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE USER(</span><br><span class="line">	id INT NOT NULL,</span><br><span class="line">	NAME VARCHAR( 25 ),</span><br><span class="line">	PASSWORD VARCHAR( 16 ),</span><br><span class="line">	-- ä½¿ç”¨è¡¨çº§çº¦æŸè¯­æ³•</span><br><span class="line">	CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¡¨ç¤ºç”¨æˆ·åå’Œå¯†ç ç»„åˆä¸èƒ½é‡å¤</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 1 ,&#x27;å¼ ä¸‰&#x27;,&#x27;13710011002&#x27;,&#x27;101223199012015623&#x27;);</span><br><span class="line">insert into student values( 2 ,&#x27;æå››&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015624&#x27;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">| sid | sname | tel | cardid |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">| 1 | å¼ ä¸‰ | 13710011002 | 101223199012015623 |</span><br><span class="line">| 2 | æå›› | 13710011003 | 101223199012015624 |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 3 ,&#x27;ç‹äº”&#x27;,&#x27;13710011004&#x27;,&#x27;101223199012015624&#x27;); #èº«ä»½è¯å·é‡å¤</span><br><span class="line">ERROR 1062 ( 23000 ): Duplicate entry &#x27;101223199012015624&#x27; for key &#x27;cardid&#x27;</span><br><span class="line"></span><br><span class="line">insert into student values( 3 ,&#x27;ç‹äº”&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015625&#x27;);</span><br><span class="line">ERROR 1062 ( 23000 ): Duplicate entry &#x27;13710011003&#x27; for key &#x27;tel&#x27;</span><br></pre></td></tr></table></figure>

<p>(2) å»ºè¡¨åæŒ‡å®šå”¯ä¸€é”®çº¦æŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#å­—æ®µåˆ—è¡¨ä¸­å¦‚æœæ˜¯ä¸€ä¸ªå­—æ®µï¼Œè¡¨ç¤ºè¯¥åˆ—çš„å€¼å”¯ä¸€ã€‚å¦‚æœæ˜¯ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªå­—æ®µï¼Œé‚£ä¹ˆå¤åˆå”¯ä¸€ï¼Œå³å¤šä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ä¸€çš„</span><br><span class="line"></span><br><span class="line">#æ–¹å¼ 1 ï¼š</span><br><span class="line">alter table è¡¨åç§° add unique key(å­—æ®µåˆ—è¡¨);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#æ–¹å¼ 2 ï¼š</span><br><span class="line">alter table è¡¨åç§° modify å­—æ®µå å­—æ®µç±»å‹ unique;</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE USER</span><br><span class="line">ADD UNIQUE(NAME,PASSWORD);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE USER</span><br><span class="line">ADD CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE USER</span><br><span class="line">MODIFY NAME VARCHAR( 20 ) UNIQUE;</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">	sid int primary key,</span><br><span class="line">	sname varchar( 20 ),</span><br><span class="line">	tel char( 11 ) ,</span><br><span class="line">	cardid char( 18 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table student add unique key(tel);</span><br><span class="line">alter table student add unique key(cardid);</span><br></pre></td></tr></table></figure>

<h3 id="3-5-å…³äºå¤åˆå”¯ä¸€çº¦æŸ"><a href="#3-5-å…³äºå¤åˆå”¯ä¸€çº¦æŸ" class="headerlink" title="3. 5 å…³äºå¤åˆå”¯ä¸€çº¦æŸ"></a>3. 5 å…³äºå¤åˆå”¯ä¸€çº¦æŸ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	unique key(å­—æ®µåˆ—è¡¨) #å­—æ®µåˆ—è¡¨ä¸­å†™çš„æ˜¯å¤šä¸ªå­—æ®µåï¼Œå¤šä¸ªå­—æ®µåç”¨é€—å·åˆ†éš”ï¼Œè¡¨ç¤ºé‚£ä¹ˆ			æ˜¯å¤åˆå”¯ä¸€ï¼Œå³å¤šä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ä¸€çš„</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#å­¦ç”Ÿè¡¨</span><br><span class="line">create table student(</span><br><span class="line">	sid int, #å­¦å·</span><br><span class="line">	sname varchar( 20 ), #å§“å</span><br><span class="line">	tel char( 11 ) unique key,  #ç”µè¯</span><br><span class="line">	cardid char( 18 ) unique key #èº«ä»½è¯å·</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#è¯¾ç¨‹è¡¨</span><br><span class="line">create table course(</span><br><span class="line">	cid int,  #è¯¾ç¨‹ç¼–å·</span><br><span class="line">	cname varchar( 20 ) #è¯¾ç¨‹åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#é€‰è¯¾è¡¨</span><br><span class="line">create table student_course(</span><br><span class="line">	id int,</span><br><span class="line">	sid int,</span><br><span class="line">	cid int,</span><br><span class="line">	score int,</span><br><span class="line">	unique key(sid,cid)  #å¤åˆå”¯ä¸€</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 1 ,&#x27;å¼ ä¸‰&#x27;,&#x27;13710011002&#x27;,&#x27;101223199012015623&#x27;);#æˆåŠŸ</span><br><span class="line">insert into student values( 2 ,&#x27;æå››&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015624&#x27;);#æˆåŠŸ</span><br><span class="line">insert into course values( 1001 ,&#x27;Java&#x27;),( 1002 ,&#x27;MySQL&#x27;);#æˆåŠŸ</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">| sid | sname | tel | cardid |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">| 1 | å¼ ä¸‰ | 13710011002 | 101223199012015623 |</span><br><span class="line">| 2 | æå›› | 13710011003 | 101223199012015624 |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from course;</span><br><span class="line">+------+-------+</span><br><span class="line">| cid | cname |</span><br><span class="line">+------+-------+</span><br><span class="line">| 1001 | Java |</span><br><span class="line">| 1002 | MySQL |</span><br><span class="line">+------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values</span><br><span class="line">( 1 , 1 , 1001 , 89 ),</span><br><span class="line">( 2 , 1 , 1002 , 90 ),</span><br><span class="line">( 3 , 2 , 1001 , 88 ),</span><br><span class="line">( 4 , 2 , 1002 , 56 );#æˆåŠŸ</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student_course;</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">| id | sid | cid | score |</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">| 1 | 1 | 1001 | 89 |</span><br><span class="line">| 2 | 1 | 1002 | 90 |</span><br><span class="line">| 3 | 2 | 1001 | 88 |</span><br><span class="line">| 4 | 2 | 1002 | 56 |</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values ( 5 , 1 , 1001 , 88 );#å¤±è´¥</span><br><span class="line"></span><br><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;1-1001&#x27; for key &#x27;sid&#x27; è¿åsid-cidçš„å¤åˆå”¯ä¸€</span><br></pre></td></tr></table></figure>

<h3 id="3-6-åˆ é™¤å”¯ä¸€çº¦æŸ"><a href="#3-6-åˆ é™¤å”¯ä¸€çº¦æŸ" class="headerlink" title="3. 6 åˆ é™¤å”¯ä¸€çº¦æŸ"></a>3. 6 åˆ é™¤å”¯ä¸€çº¦æŸ</h3><ul>
<li>æ·»åŠ å”¯ä¸€æ€§çº¦æŸçš„åˆ—ä¸Šä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚</li>
<li>åˆ é™¤å”¯ä¸€çº¦æŸåªèƒ½é€šè¿‡åˆ é™¤å”¯ä¸€ç´¢å¼•çš„æ–¹å¼åˆ é™¤ã€‚</li>
<li>åˆ é™¤æ—¶éœ€è¦æŒ‡å®šå”¯ä¸€ç´¢å¼•åï¼Œå”¯ä¸€ç´¢å¼•åå°±å’Œå”¯ä¸€çº¦æŸåä¸€æ ·ã€‚</li>
<li>å¦‚æœåˆ›å»ºå”¯ä¸€çº¦æŸæ—¶æœªæŒ‡å®šåç§°ï¼Œå¦‚æœæ˜¯å•åˆ—ï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒï¼›å¦‚æœæ˜¯ç»„åˆåˆ—ï¼Œé‚£ä¹ˆé»˜è®¤å’Œ()ä¸­æ’åœ¨ç¬¬ä¸€ä¸ªçš„åˆ—åç›¸åŒã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å”¯ä¸€æ€§çº¦æŸåã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;è¡¨å&#x27;; #æŸ¥çœ‹éƒ½æœ‰å“ªäº›çº¦æŸ</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE USER</span><br><span class="line">DROP INDEX uk_name_pwd;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼šå¯ä»¥é€šè¿‡ <code>show index from è¡¨åç§°;</code>æŸ¥çœ‹è¡¨çš„ç´¢å¼•</p>
</blockquote>
<hr>
<h2 id="4-PRIMARY-KEY-çº¦æŸ"><a href="#4-PRIMARY-KEY-çº¦æŸ" class="headerlink" title="4. PRIMARY KEY çº¦æŸ"></a>4. PRIMARY KEY çº¦æŸ</h2><hr>
<h3 id="4-1-ä½œç”¨"><a href="#4-1-ä½œç”¨" class="headerlink" title="4. 1 ä½œç”¨"></a>4. 1 ä½œç”¨</h3><p>ç”¨æ¥å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„ä¸€è¡Œè®°å½•ã€‚</p>
<h3 id="4-2-å…³é”®å­—"><a href="#4-2-å…³é”®å­—" class="headerlink" title="4. 2 å…³é”®å­—"></a>4. 2 å…³é”®å­—</h3><p>primary key</p>
<h3 id="4-3-ç‰¹ç‚¹"><a href="#4-3-ç‰¹ç‚¹" class="headerlink" title="4. 3 ç‰¹ç‚¹"></a>4. 3 ç‰¹ç‚¹</h3><ul>
<li>ä¸»é”®çº¦æŸç›¸å½“äº å”¯ä¸€çº¦æŸ+éç©ºçº¦æŸçš„ç»„åˆ ï¼Œä¸»é”®çº¦æŸåˆ—ä¸å…è®¸é‡å¤ï¼Œä¹Ÿä¸å…è®¸å‡ºç°ç©ºå€¼ã€‚<br><img src="/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/1650271961132.png" alt="1650271961132"></li>
<li>ä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªä¸»é”®çº¦æŸï¼Œå»ºç«‹ä¸»é”®çº¦æŸå¯ä»¥åœ¨åˆ—çº§åˆ«åˆ›å»ºï¼Œä¹Ÿå¯ä»¥åœ¨è¡¨çº§åˆ«ä¸Šåˆ›å»ºã€‚</li>
<li>ä¸»é”®çº¦æŸå¯¹åº”ç€è¡¨ä¸­çš„ä¸€åˆ—æˆ–è€…å¤šåˆ—ï¼ˆå¤åˆä¸»é”®ï¼‰</li>
<li>å¦‚æœæ˜¯å¤šåˆ—ç»„åˆçš„å¤åˆä¸»é”®çº¦æŸï¼Œé‚£ä¹ˆè¿™äº›åˆ—éƒ½ä¸å…è®¸ä¸ºç©ºå€¼ï¼Œå¹¶ä¸”ç»„åˆçš„å€¼ä¸å…è®¸é‡å¤ã€‚</li>
<li><strong>MySQLçš„ä¸»é”®åæ€»æ˜¯PRIMARY</strong> ï¼Œå°±ç®—è‡ªå·±å‘½åäº†ä¸»é”®çº¦æŸåä¹Ÿæ²¡ç”¨ã€‚</li>
<li>å½“åˆ›å»ºä¸»é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—æˆ–åˆ—ç»„åˆä¸Šå»ºç«‹å¯¹åº”çš„ <strong>ä¸»é”®ç´¢å¼•</strong> ï¼ˆèƒ½å¤Ÿæ ¹æ®ä¸»é”®æŸ¥è¯¢çš„ï¼Œå°±æ ¹æ®ä¸»é”®æŸ¥è¯¢ï¼Œæ•ˆç‡æ›´é«˜ï¼‰ã€‚å¦‚æœåˆ é™¤ä¸»é”®çº¦æŸäº†ï¼Œä¸»é”®çº¦æŸå¯¹åº”çš„ç´¢å¼•å°±è‡ªåŠ¨åˆ é™¤äº†ã€‚</li>
<li>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä¸è¦ä¿®æ”¹ä¸»é”®å­—æ®µçš„å€¼ã€‚å› ä¸ºä¸»é”®æ˜¯æ•°æ®è®°å½•çš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚æœä¿®æ”¹äº†ä¸»é”®çš„å€¼ï¼Œå°±æœ‰å¯èƒ½ä¼šç ´åæ•°æ®çš„å®Œæ•´æ€§ã€‚</li>
</ul>
<h3 id="4-4-æ·»åŠ ä¸»é”®çº¦æŸ"><a href="#4-4-æ·»åŠ ä¸»é”®çº¦æŸ" class="headerlink" title="4. 4 æ·»åŠ ä¸»é”®çº¦æŸ"></a>4. 4 æ·»åŠ ä¸»é”®çº¦æŸ</h3><p>(1) å»ºè¡¨æ—¶æŒ‡å®šä¸»é”®çº¦æŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹ primary key, #åˆ—çº§æ¨¡å¼</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹</span><br><span class="line">);</span><br><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	[constraint çº¦æŸå] primary key(å­—æ®µå) #è¡¨çº§æ¨¡å¼</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table temp(</span><br><span class="line">	id int primary key,</span><br><span class="line">	name varchar( 20 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc temp;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| id | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| name | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values( 1 ,&#x27;å¼ ä¸‰&#x27;);#æˆåŠŸ</span><br><span class="line">insert into temp values( 2 ,&#x27;æå››&#x27;);#æˆåŠŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from temp;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">| 1 | å¼ ä¸‰ |</span><br><span class="line">| 2 | æå›› |</span><br><span class="line">+----+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values( 1 ,&#x27;å¼ ä¸‰&#x27;);#å¤±è´¥</span><br><span class="line">ERROR 1062 ( 23000 ): Duplicateï¼ˆé‡å¤ï¼‰ entryï¼ˆé”®å…¥ï¼Œè¾“å…¥ï¼‰ &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line">insert into temp values( 1 ,&#x27;ç‹äº”&#x27;);#å¤±è´¥</span><br><span class="line">ERROR 1062 ( 23000 ): Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line">insert into temp values( 3 ,&#x27;å¼ ä¸‰&#x27;);#æˆåŠŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from temp;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">| 1 | å¼ ä¸‰ |</span><br><span class="line">| 2 | æå›› |</span><br><span class="line">| 3 | å¼ ä¸‰ |</span><br><span class="line">+----+------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values( 4 ,null);#æˆåŠŸ</span><br><span class="line"></span><br><span class="line">insert into temp values(null,&#x27;æç¦&#x27;);#å¤±è´¥</span><br><span class="line">ERROR 1048 ( 23000 ): Column &#x27;id&#x27; cannot be null</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from temp;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">| 1 | å¼ ä¸‰ |</span><br><span class="line">| 2 | æå›› |</span><br><span class="line">| 3 | å¼ ä¸‰ |</span><br><span class="line">| 4 | NULL |</span><br><span class="line">+----+------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#æ¼”ç¤ºä¸€ä¸ªè¡¨å»ºç«‹ä¸¤ä¸ªä¸»é”®çº¦æŸ</span><br><span class="line">create table temp(</span><br><span class="line">	id int primary key,</span><br><span class="line">	name varchar( 20 ) primary key</span><br><span class="line">);</span><br><span class="line">ERROR 1068 ( 42000 ): Multipleï¼ˆå¤šé‡çš„ï¼‰ primary key definedï¼ˆå®šä¹‰ï¼‰</span><br></pre></td></tr></table></figure>

<p>å†ä¸¾ä¾‹ï¼š</p>
<ul>
<li><p>åˆ—çº§çº¦æŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp4(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT ,</span><br><span class="line">	NAME VARCHAR( 20 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¡¨çº§çº¦æŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp5(</span><br><span class="line">	id INT NOT NULL AUTO_INCREMENT,</span><br><span class="line">	NAME VARCHAR( 20 ),</span><br><span class="line">	pwd VARCHAR( 15 ),</span><br><span class="line">	CONSTRAINT emp5_id_pk PRIMARY KEY(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
</ul>
<p>(2) å»ºè¡¨åå¢åŠ ä¸»é”®çº¦æŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE è¡¨åç§° ADD PRIMARY KEY(å­—æ®µåˆ—è¡¨); #å­—æ®µåˆ—è¡¨å¯ä»¥æ˜¯ä¸€ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå­—æ®µï¼Œå¦‚æœæ˜¯å¤šä¸ªå­—æ®µçš„è¯ï¼Œæ˜¯å¤åˆä¸»é”®</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student ADD PRIMARY KEY (sid);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp5 ADD PRIMARY KEY(NAME,pwd);</span><br></pre></td></tr></table></figure>


<h3 id="4-5-å…³äºå¤åˆä¸»é”®"><a href="#4-5-å…³äºå¤åˆä¸»é”®" class="headerlink" title="4. 5 å…³äºå¤åˆä¸»é”®"></a>4. 5 å…³äºå¤åˆä¸»é”®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	å­—æ®µå æ•°æ®ç±»å‹,</span><br><span class="line">	primary key(å­—æ®µå1,å­—æ®µå2)  #è¡¨ç¤ºå­—æ®µ 1 å’Œå­—æ®µ 2 çš„ç»„åˆæ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿå¯ä»¥æœ‰æ›´å¤š		ä¸ªå­—æ®µ</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#å­¦ç”Ÿè¡¨</span><br><span class="line">create table student(</span><br><span class="line">	sid int primary key,  #å­¦å·</span><br><span class="line">	sname varchar( 20 ) #å­¦ç”Ÿå§“å</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#è¯¾ç¨‹è¡¨</span><br><span class="line">create table course(</span><br><span class="line">	cid int primary key,  #è¯¾ç¨‹ç¼–å·</span><br><span class="line">	cname varchar( 20 ) #è¯¾ç¨‹åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#é€‰è¯¾è¡¨</span><br><span class="line">create table student_course(</span><br><span class="line">	sid int,</span><br><span class="line">	cid int,</span><br><span class="line">	score int,</span><br><span class="line">	primary key(sid,cid)  #å¤åˆä¸»é”®</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 1 ,&#x27;å¼ ä¸‰&#x27;),( 2 ,&#x27;æå››&#x27;);</span><br><span class="line">insert into course values( 1001 ,&#x27;Java&#x27;),( 1002 ,&#x27;MySQL&#x27;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br><span class="line">+-----+-------+</span><br><span class="line">| sid | sname |</span><br><span class="line">+-----+-------+</span><br><span class="line">| 1 | å¼ ä¸‰ |</span><br><span class="line">| 2 | æå›› |</span><br><span class="line">+-----+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from course;</span><br><span class="line">+------+-------+</span><br><span class="line">| cid | cname |</span><br><span class="line">+------+-------+</span><br><span class="line">| 1001 | Java |</span><br><span class="line">| 1002 | MySQL |</span><br><span class="line">+------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values(1,1001,89),(1,1002,90),(2,1001,88),(2,1002,56);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student_course;</span><br><span class="line">+-----+------+-------+</span><br><span class="line">| sid | cid | score |</span><br><span class="line">+-----+------+-------+</span><br><span class="line">| 1 | 1001 | 89 |</span><br><span class="line">| 1 | 1002 | 90 |</span><br><span class="line">| 2 | 1001 | 88 |</span><br><span class="line">| 2 | 1002 | 56 |</span><br><span class="line">+-----+------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values( 1 , 1001 , 100 );</span><br><span class="line">ERROR 1062 ( 23000 ): Duplicate entry &#x27;1-1001&#x27; for key &#x27;PRIMARY&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc student_course;</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| sid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| cid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| score | int( 11 ) | YES | | NULL | |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å†ä¸¾ä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp6(</span><br><span class="line">	id INT NOT NULL,</span><br><span class="line">	NAME VARCHAR( 20 ),</span><br><span class="line">	pwd VARCHAR( 15 ),</span><br><span class="line">	CONSTRAINT emp7_pk PRIMARY KEY(NAME,pwd)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-6-åˆ é™¤ä¸»é”®çº¦æŸ"><a href="#4-6-åˆ é™¤ä¸»é”®çº¦æŸ" class="headerlink" title="4. 6 åˆ é™¤ä¸»é”®çº¦æŸ"></a>4. 6 åˆ é™¤ä¸»é”®çº¦æŸ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° drop primary key;</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp5 DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¯´æ˜ï¼šåˆ é™¤ä¸»é”®çº¦æŸï¼Œä¸éœ€è¦æŒ‡å®šä¸»é”®åï¼Œå› ä¸ºä¸€ä¸ªè¡¨åªæœ‰ä¸€ä¸ªä¸»é”®ï¼Œåˆ é™¤ä¸»é”®çº¦æŸåï¼Œéç©ºè¿˜å­˜åœ¨ã€‚</p>
</blockquote>
<hr>
<h2 id="5-è‡ªå¢åˆ—ï¼šAUTO-INCREMENT"><a href="#5-è‡ªå¢åˆ—ï¼šAUTO-INCREMENT" class="headerlink" title="5. è‡ªå¢åˆ—ï¼šAUTO_INCREMENT"></a>5. è‡ªå¢åˆ—ï¼šAUTO_INCREMENT</h2><hr>
<h3 id="5-1-ä½œç”¨"><a href="#5-1-ä½œç”¨" class="headerlink" title="5. 1 ä½œç”¨"></a>5. 1 ä½œç”¨</h3><p>æŸä¸ªå­—æ®µçš„å€¼è‡ªå¢</p>
<h3 id="5-2-å…³é”®å­—"><a href="#5-2-å…³é”®å­—" class="headerlink" title="5. 2 å…³é”®å­—"></a>5. 2 å…³é”®å­—</h3><p>auto_increment</p>
<h3 id="5-3-ç‰¹ç‚¹å’Œè¦æ±‚"><a href="#5-3-ç‰¹ç‚¹å’Œè¦æ±‚" class="headerlink" title="5. 3 ç‰¹ç‚¹å’Œè¦æ±‚"></a>5. 3 ç‰¹ç‚¹å’Œè¦æ±‚</h3><ol>
<li>ä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªè‡ªå¢é•¿åˆ—</li>
<li>å½“éœ€è¦äº§ç”Ÿå”¯ä¸€æ ‡è¯†ç¬¦æˆ–é¡ºåºå€¼æ—¶ï¼Œå¯è®¾ç½®è‡ªå¢é•¿</li>
<li>è‡ªå¢é•¿åˆ—çº¦æŸçš„åˆ—å¿…é¡»æ˜¯é”®åˆ—ï¼ˆä¸»é”®åˆ—ï¼Œå”¯ä¸€é”®åˆ—ï¼‰</li>
<li>è‡ªå¢çº¦æŸçš„åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯æ•´æ•°ç±»å‹</li>
<li>å¦‚æœè‡ªå¢åˆ—æŒ‡å®šäº† 0 å’Œ nullï¼Œä¼šåœ¨å½“å‰æœ€å¤§å€¼çš„åŸºç¡€ä¸Šè‡ªå¢ï¼›å¦‚æœè‡ªå¢åˆ—æ‰‹åŠ¨æŒ‡å®šäº†å…·ä½“å€¼ï¼Œç›´æ¥èµ‹å€¼ä¸ºå…·ä½“å€¼ã€‚</li>
</ol>
<p>é”™è¯¯æ¼”ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">	eid int auto_increment,</span><br><span class="line">	ename varchar( 20 )</span><br><span class="line">);</span><br><span class="line"># ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">	eid int primary key,</span><br><span class="line">	ename varchar( 20 ) unique key auto_increment</span><br><span class="line">);</span><br><span class="line"># ERROR 1063 (42000): Incorrect column specifier for column &#x27;ename&#x27; å› ä¸ºenameä¸æ˜¯æ•´æ•°ç±»å‹</span><br></pre></td></tr></table></figure>

<h3 id="5-4-å¦‚ä½•æŒ‡å®šè‡ªå¢çº¦æŸ"><a href="#5-4-å¦‚ä½•æŒ‡å®šè‡ªå¢çº¦æŸ" class="headerlink" title="5. 4 å¦‚ä½•æŒ‡å®šè‡ªå¢çº¦æŸ"></a>5. 4 å¦‚ä½•æŒ‡å®šè‡ªå¢çº¦æŸ</h3><p><strong>(1) å»ºè¡¨æ—¶</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ primary key auto_increment,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ unique key not null,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ unique key,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,</span><br><span class="line">);</span><br><span class="line">create table è¡¨åç§°(</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼ ,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ unique key auto_increment,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,,</span><br><span class="line">    primary key(å­—æ®µå)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">    eid int primary key auto_increment,</span><br><span class="line">    ename varchar( 20 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | auto_increment |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>(2) å»ºè¡¨å</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ auto_increment;</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">    eid int primary key ,</span><br><span class="line">    ename varchar( 20 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify eid int auto_increment;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | auto_increment |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="5-5-å¦‚ä½•åˆ é™¤è‡ªå¢çº¦æŸ"><a href="#5-5-å¦‚ä½•åˆ é™¤è‡ªå¢çº¦æŸ" class="headerlink" title="5. 5 å¦‚ä½•åˆ é™¤è‡ªå¢çº¦æŸ"></a>5. 5 å¦‚ä½•åˆ é™¤è‡ªå¢çº¦æŸ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ auto_increment;#ç»™è¿™ä¸ªå­—æ®µå¢åŠ è‡ªå¢çº¦æŸ</span><br><span class="line"></span><br><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹; #å»æ‰auto_incrementç›¸å½“äºåˆ é™¤</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify eid int;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="5-6-MySQL-8-0-æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–"><a href="#5-6-MySQL-8-0-æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–" class="headerlink" title="5. 6 MySQL 8. 0 æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–"></a>5. 6 MySQL 8. 0 æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–</h3><p>åœ¨MySQL 8.0ä¹‹å‰ï¼Œè‡ªå¢ä¸»é”®AUTO_INCREMENTçš„å€¼å¦‚æœå¤§äºmax(primary key)+1ï¼Œåœ¨MySQLé‡å¯åï¼Œä¼šé‡ç½®AUTO_INCREMENT&#x3D;max(primary key)+1ï¼Œè¿™ç§ç°è±¡åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸šåŠ¡ä¸»é”®å†²çªæˆ–è€…å…¶ä»–éš¾ä»¥å‘ç°çš„é—®é¢˜ã€‚ ä¸‹é¢é€šè¿‡æ¡ˆä¾‹æ¥å¯¹æ¯”ä¸åŒçš„ç‰ˆæœ¬ä¸­è‡ªå¢å˜é‡æ˜¯å¦æŒä¹…åŒ–ã€‚ åœ¨MySQL 5.7ç‰ˆæœ¬ä¸­ï¼Œæµ‹è¯•æ­¥éª¤å¦‚ä¸‹ï¼š åˆ›å»ºçš„æ•°æ®è¡¨ä¸­åŒ…å«è‡ªå¢ä¸»é”®çš„idå­—æ®µï¼Œè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test1(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>æ’å…¥ 4 ä¸ªç©ºå€¼ï¼Œæ‰§è¡Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO test</span><br><span class="line">VALUES( 0 ),( 0 ),( 0 ),( 0 );</span><br></pre></td></tr></table></figure>

<p>æŸ¥è¯¢æ•°æ®è¡¨test1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">| 4 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤idä¸º 4 çš„è®°å½•ï¼Œè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM test1 WHERE id = 4 ;</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡æ’å…¥ä¸€ä¸ªç©ºå€¼ï¼Œè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO test1 VALUES( 0 );</span><br></pre></td></tr></table></figure>

<p>æŸ¥è¯¢æ­¤æ—¶æ•°æ®è¡¨test1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">| 5 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶åˆ é™¤äº†idä¸º 4 çš„è®°å½•ï¼Œä½†æ˜¯å†æ¬¡æ’å…¥ç©ºå€¼æ—¶ï¼Œå¹¶æ²¡æœ‰é‡ç”¨è¢«åˆ é™¤çš„ 4 ï¼Œè€Œæ˜¯åˆ†é…äº†5 ã€‚ åˆ é™¤idä¸º 5 çš„è®°å½•ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM test1 where id= 5 ;</span><br></pre></td></tr></table></figure>

<p><strong>é‡å¯æ•°æ®åº“</strong> ï¼Œé‡æ–°æ’å…¥ä¸€ä¸ªç©ºå€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO test1 values( 0 );</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡æŸ¥è¯¢æ•°æ®è¡¨test1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">| 4 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ–°æ’å…¥çš„ 0 å€¼åˆ†é…çš„æ˜¯ 4 ï¼ŒæŒ‰ç…§é‡å¯å‰çš„æ“ä½œé€»è¾‘ï¼Œæ­¤å¤„åº”è¯¥åˆ†é… 6 ã€‚å‡ºç°ä¸Šè¿°ç»“æœçš„ä¸»è¦åŸå› æ˜¯è‡ªå¢ä¸»é”®æ²¡æœ‰æŒä¹…åŒ–ã€‚ åœ¨MySQL 5. 7 ç³»ç»Ÿä¸­ï¼Œå¯¹äºè‡ªå¢ä¸»é”®çš„åˆ†é…è§„åˆ™ï¼Œæ˜¯ç”±InnoDBæ•°æ®å­—å…¸å†…éƒ¨ä¸€ä¸ª<code>è®¡æ•°å™¨</code>æ¥å†³å®šçš„ï¼Œè€Œè¯¥è®¡æ•°å™¨åªåœ¨<code>å†…å­˜ä¸­ç»´æŠ¤</code>ï¼Œå¹¶ä¸ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ã€‚å½“æ•°æ®åº“é‡å¯æ—¶ï¼Œè¯¥è®¡æ•°å™¨ä¼šè¢«åˆå§‹åŒ–ã€‚</p>
<p>åœ¨MySQL 8. 0 ç‰ˆæœ¬ä¸­ï¼Œä¸Šè¿°æµ‹è¯•æ­¥éª¤æœ€åä¸€æ­¥çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">| 6 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè‡ªå¢å˜é‡å·²ç»æŒä¹…åŒ–äº†ã€‚</p>
<p>MySQL 8. 0 å°†è‡ªå¢ä¸»é”®çš„è®¡æ•°å™¨æŒä¹…åŒ–åˆ°<code>é‡åšæ—¥å¿—</code>ä¸­ã€‚æ¯æ¬¡è®¡æ•°å™¨å‘ç”Ÿæ”¹å˜ï¼Œéƒ½ä¼šå°†å…¶å†™å…¥é‡åšæ—¥å¿—ä¸­ã€‚å¦‚æœæ•°æ®åº“é‡å¯ï¼ŒInnoDBä¼šæ ¹æ®é‡åšæ—¥å¿—ä¸­çš„ä¿¡æ¯æ¥åˆå§‹åŒ–è®¡æ•°å™¨çš„å†…å­˜å€¼ã€‚</p>
<hr>
<h2 id="6-FOREIGN-KEY-çº¦æŸ"><a href="#6-FOREIGN-KEY-çº¦æŸ" class="headerlink" title="6. FOREIGN KEY çº¦æŸ"></a>6. FOREIGN KEY çº¦æŸ</h2><hr>
<h3 id="6-1-ä½œç”¨"><a href="#6-1-ä½œç”¨" class="headerlink" title="6. 1 ä½œç”¨"></a>6. 1 ä½œç”¨</h3><p>é™å®šæŸä¸ªè¡¨çš„æŸä¸ªå­—æ®µçš„å¼•ç”¨å®Œæ•´æ€§ã€‚</p>
<p>æ¯”å¦‚ï¼šå‘˜å·¥è¡¨çš„å‘˜å·¥æ‰€åœ¨éƒ¨é—¨çš„é€‰æ‹©ï¼Œå¿…é¡»åœ¨éƒ¨é—¨è¡¨èƒ½æ‰¾åˆ°å¯¹åº”çš„éƒ¨åˆ†ã€‚</p>
<p><img src="/2022/04/18/%E7%AC%AC13%E7%AB%A0-%E7%BA%A6%E6%9D%9F/1650272932586.png" alt="1650272932586"></p>
<h3 id="6-2-å…³é”®å­—"><a href="#6-2-å…³é”®å­—" class="headerlink" title="6. 2 å…³é”®å­—"></a>6. 2 å…³é”®å­—</h3><p>FOREIGN KEY</p>
<h3 id="6-3-ä¸»è¡¨å’Œä»è¡¨-x2F-çˆ¶è¡¨å’Œå­è¡¨"><a href="#6-3-ä¸»è¡¨å’Œä»è¡¨-x2F-çˆ¶è¡¨å’Œå­è¡¨" class="headerlink" title="6. 3 ä¸»è¡¨å’Œä»è¡¨&#x2F;çˆ¶è¡¨å’Œå­è¡¨"></a>6. 3 ä¸»è¡¨å’Œä»è¡¨&#x2F;çˆ¶è¡¨å’Œå­è¡¨</h3><p>ä¸»è¡¨ï¼ˆçˆ¶è¡¨ï¼‰ï¼šè¢«å¼•ç”¨çš„è¡¨ï¼Œè¢«å‚è€ƒçš„è¡¨</p>
<p>ä»è¡¨ï¼ˆå­è¡¨ï¼‰ï¼šå¼•ç”¨åˆ«äººçš„è¡¨ï¼Œå‚è€ƒåˆ«äººçš„è¡¨</p>
<p>ä¾‹å¦‚ï¼šå‘˜å·¥è¡¨çš„å‘˜å·¥æ‰€åœ¨éƒ¨é—¨è¿™ä¸ªå­—æ®µçš„å€¼è¦å‚è€ƒéƒ¨é—¨è¡¨ï¼šéƒ¨é—¨è¡¨æ˜¯ä¸»è¡¨ï¼Œå‘˜å·¥è¡¨æ˜¯ä»è¡¨ã€‚</p>
<p>ä¾‹å¦‚ï¼šå­¦ç”Ÿè¡¨ã€è¯¾ç¨‹è¡¨ã€é€‰è¯¾è¡¨ï¼šé€‰è¯¾è¡¨çš„å­¦ç”Ÿå’Œè¯¾ç¨‹è¦åˆ†åˆ«å‚è€ƒå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨ï¼Œå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨æ˜¯ä¸»è¡¨ï¼Œé€‰è¯¾è¡¨æ˜¯ä»è¡¨ã€‚</p>
<h3 id="6-4-ç‰¹ç‚¹"><a href="#6-4-ç‰¹ç‚¹" class="headerlink" title="6. 4 ç‰¹ç‚¹"></a>6. 4 ç‰¹ç‚¹</h3><ol>
<li><p>ä»è¡¨çš„å¤–é”®åˆ—ï¼Œå¿…é¡»å¼•ç”¨&#x2F;å‚è€ƒä¸»è¡¨çš„ä¸»é”®æˆ–å”¯ä¸€çº¦æŸçš„åˆ—</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¢«ä¾èµ–&#x2F;è¢«å‚è€ƒçš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„</p>
</li>
<li><p>åœ¨åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œå¦‚æœä¸ç»™å¤–é”®çº¦æŸå‘½åï¼Œ é»˜è®¤åä¸æ˜¯åˆ—åï¼Œè€Œæ˜¯è‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªå¤–é”®å ï¼ˆä¾‹å¦‚student_ibfk_1;ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¤–é”®çº¦æŸåã€‚</p>
</li>
<li><p>åˆ›å»º(CREATE)è¡¨æ—¶å°±æŒ‡å®šå¤–é”®çº¦æŸçš„è¯ï¼Œå…ˆåˆ›å»ºä¸»è¡¨ï¼Œå†åˆ›å»ºä»è¡¨</p>
</li>
<li><p>åˆ è¡¨æ—¶ï¼Œå…ˆåˆ ä»è¡¨ï¼ˆæˆ–å…ˆåˆ é™¤å¤–é”®çº¦æŸï¼‰ï¼Œå†åˆ é™¤ä¸»è¡¨</p>
</li>
<li><p>å½“ä¸»è¡¨çš„è®°å½•è¢«ä»è¡¨å‚ç…§æ—¶ï¼Œä¸»è¡¨çš„è®°å½•å°†ä¸å…è®¸åˆ é™¤ï¼Œå¦‚æœè¦åˆ é™¤æ•°æ®ï¼Œéœ€è¦å…ˆåˆ é™¤ä»è¡¨ä¸­ä¾èµ–è¯¥è®°å½•çš„æ•°æ®ï¼Œç„¶åæ‰å¯ä»¥åˆ é™¤ä¸»è¡¨çš„æ•°æ®</p>
</li>
<li><p>åœ¨â€œä»è¡¨â€ä¸­æŒ‡å®šå¤–é”®çº¦æŸï¼Œå¹¶ä¸”ä¸€ä¸ªè¡¨å¯ä»¥å»ºç«‹å¤šä¸ªå¤–é”®çº¦æŸ</p>
</li>
<li><p>ä»è¡¨çš„å¤–é”®åˆ—ä¸ä¸»è¡¨è¢«å‚ç…§çš„åˆ—åå­—å¯ä»¥ä¸ç›¸åŒï¼Œä½†æ˜¯æ•°æ®ç±»å‹å¿…é¡»ä¸€æ ·ï¼Œé€»è¾‘æ„ä¹‰ä¸€è‡´ã€‚å¦‚æœç±»å‹ä¸ä¸€æ ·ï¼Œåˆ›å»ºå­è¡¨æ—¶ï¼Œå°±ä¼šå‡ºç°é”™è¯¯â€œERROR 1005 (HY000): Canâ€™t create tableâ€™database.tablenameâ€™(errno: 150)â€ã€‚</p>
<p>ä¾‹å¦‚ï¼šéƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨ç¼–å·ï¼Œéƒ½æ˜¯intç±»å‹ã€‚</p>
</li>
<li><p>å½“åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—ä¸Šå»ºç«‹å¯¹åº”çš„æ™®é€šç´¢å¼• ã€‚ä½†æ˜¯ç´¢å¼•åæ˜¯å¤–é”®çš„çº¦æŸåã€‚ï¼ˆæ ¹æ®å¤–é”®æŸ¥è¯¢æ•ˆç‡å¾ˆé«˜ï¼‰</p>
</li>
<li><p>åˆ é™¤å¤–é”®çº¦æŸåï¼Œå¿…é¡»æ‰‹åŠ¨åˆ é™¤å¯¹åº”çš„ç´¢å¼•</p>
</li>
</ol>
<h3 id="6-5-æ·»åŠ å¤–é”®çº¦æŸ"><a href="#6-5-æ·»åŠ å¤–é”®çº¦æŸ" class="headerlink" title="6. 5 æ·»åŠ å¤–é”®çº¦æŸ"></a>6. 5 æ·»åŠ å¤–é”®çº¦æŸ</h3><p>(1) å»ºè¡¨æ—¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">create table ä¸»è¡¨åç§°(</span><br><span class="line">    å­—æ®µ 1 æ•°æ®ç±»å‹ primary key,</span><br><span class="line">    å­—æ®µ 2 æ•°æ®ç±»å‹</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table ä»è¡¨åç§°(</span><br><span class="line">    å­—æ®µ 1 æ•°æ®ç±»å‹ primary key,</span><br><span class="line">    å­—æ®µ 2 æ•°æ®ç±»å‹,</span><br><span class="line">    [CONSTRAINT &lt;å¤–é”®çº¦æŸåç§°&gt;] FOREIGN KEYï¼ˆä»è¡¨çš„æŸä¸ªå­—æ®µ) references ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)</span><br><span class="line">);</span><br><span class="line">#(ä»è¡¨çš„æŸä¸ªå­—æ®µ)çš„æ•°æ®ç±»å‹å¿…é¡»ä¸ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)çš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œé€»è¾‘æ„ä¹‰ä¹Ÿä¸€æ ·</span><br><span class="line">#(ä»è¡¨çš„æŸä¸ªå­—æ®µ)çš„å­—æ®µåå¯ä»¥ä¸ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)çš„å­—æ®µåä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ä¸ä¸€æ ·</span><br><span class="line"></span><br><span class="line">-- FOREIGN KEY: åœ¨è¡¨çº§æŒ‡å®šå­è¡¨ä¸­çš„åˆ—</span><br><span class="line">-- REFERENCES: æ ‡ç¤ºåœ¨çˆ¶è¡¨ä¸­çš„åˆ—</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">create table dept( #ä¸»è¡¨</span><br><span class="line">    did int primary key, #éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar( 50 ) #éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(#ä»è¡¨</span><br><span class="line">    eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar( 5 ), #å‘˜å·¥å§“å</span><br><span class="line">    deptid int, #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did) #åœ¨ä»è¡¨ä¸­æŒ‡å®šå¤–é”®çº¦æŸ</span><br><span class="line">    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">ï¼ˆ 1 ï¼‰ä¸»è¡¨deptå¿…é¡»å…ˆåˆ›å»ºæˆåŠŸï¼Œç„¶åæ‰èƒ½åˆ›å»ºempè¡¨ï¼ŒæŒ‡å®šå¤–é”®æˆåŠŸã€‚</span><br><span class="line">ï¼ˆ 2 ï¼‰åˆ é™¤è¡¨æ—¶ï¼Œå…ˆåˆ é™¤ä»è¡¨empï¼Œå†åˆ é™¤ä¸»è¡¨dept</span><br></pre></td></tr></table></figure>

<p>(2) å»ºè¡¨å</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¡¨ä¸è¡¨çš„å…³è”éƒ½æ˜¯æå‰è®¾è®¡å¥½äº†çš„ï¼Œå› æ­¤ï¼Œä¼šåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å°±æŠŠå¤–é”®çº¦æŸå®šä¹‰å¥½ã€‚ä¸è¿‡ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹è¡¨çš„è®¾è®¡ï¼ˆæ¯”å¦‚æ·»åŠ æ–°çš„å­—æ®µï¼Œå¢åŠ æ–°çš„å…³è”å…³ç³»ï¼‰ï¼Œä½†æ²¡æœ‰é¢„å…ˆå®šä¹‰å¤–é”®çº¦æŸï¼Œé‚£ä¹ˆï¼Œå°±è¦ç”¨ä¿®æ”¹è¡¨çš„æ–¹å¼æ¥è¡¥å……å®šä¹‰ã€‚</p>
<p>æ ¼å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE ä»è¡¨å ADD [CONSTRAINT çº¦æŸå] FOREIGN KEY (ä»è¡¨çš„å­—æ®µ) REFERENCES ä¸»è¡¨å(è¢«å¼•ç”¨å­—æ®µ) [on update xx][on delete xx];</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">ADD [CONSTRAINT emp_dept_id_fk] FOREIGN KEY(dept_id) REFERENCES dept(dept_id);</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">    did int primary key, #éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar( 50 ) #éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">    eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar( 5 ), #å‘˜å·¥å§“å</span><br><span class="line">    deptid int #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">);</span><br><span class="line">#è¿™ä¸¤ä¸ªè¡¨åˆ›å»ºæ—¶ï¼Œæ²¡æœ‰æŒ‡å®šå¤–é”®çš„è¯ï¼Œé‚£ä¹ˆåˆ›å»ºé¡ºåºæ˜¯éšæ„</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table emp add foreign key (deptid) references dept(did);</span><br></pre></td></tr></table></figure>

<h3 id="6-6-æ¼”ç¤ºé—®é¢˜"><a href="#6-6-æ¼”ç¤ºé—®é¢˜" class="headerlink" title="6. 6 æ¼”ç¤ºé—®é¢˜"></a>6. 6 æ¼”ç¤ºé—®é¢˜</h3><ol>
<li><p>å¤±è´¥ï¼šä¸æ˜¯é”®åˆ—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">    did int , #éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar( 50 ) #éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">    eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar( 5 ), #å‘˜å·¥å§“å</span><br><span class="line">    deptid int, #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)</span><br><span class="line">);</span><br><span class="line">#ERROR 1215 (HY000): Cannot add foreign key constraint åŸå› æ˜¯deptçš„didä¸æ˜¯é”®åˆ—</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¤±è´¥ï¼šæ•°æ®ç±»å‹ä¸ä¸€è‡´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">    did int primary key, #éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar( 50 ) #éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">    eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar( 5 ), #å‘˜å·¥å§“å</span><br><span class="line">    deptid char, #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)</span><br><span class="line">);</span><br><span class="line">#ERROR 1215 (HY000): Cannot add foreign key constraint åŸå› æ˜¯ä»è¡¨çš„deptidå­—æ®µå’Œä¸»è¡¨çš„didå­—æ®µçš„æ•°æ®ç±»å‹ä¸ä¸€è‡´ï¼Œå¹¶ä¸”è¦å®ƒä¿©çš„é€»è¾‘æ„ä¹‰ä¸€è‡´</span><br></pre></td></tr></table></figure>
</li>
<li><p>æˆåŠŸï¼Œä¸¤ä¸ªè¡¨å­—æ®µåä¸€æ ·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">    did int primary key, #éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar( 50 ) #éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">    eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar( 5 ), #å‘˜å·¥å§“å</span><br><span class="line">    did int, #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (did) references dept(did)</span><br><span class="line">    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·</span><br><span class="line">    #æ˜¯å¦é‡åæ²¡é—®é¢˜ï¼Œå› ä¸ºä¸¤ä¸ªdidåœ¨ä¸åŒçš„è¡¨ä¸­</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹é—®é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">    did int primary key, #éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar( 50 ) #éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">    eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar( 5 ), #å‘˜å·¥å§“å</span><br><span class="line">    deptid int, #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)</span><br><span class="line">    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">insert into dept values( 1001 ,&#x27;æ•™å­¦éƒ¨&#x27;);</span><br><span class="line">insert into dept values( 1003 , &#x27;è´¢åŠ¡éƒ¨&#x27;);</span><br><span class="line"></span><br><span class="line">insert into emp values( 1 ,&#x27;å¼ ä¸‰&#x27;, 1001 ); #æ·»åŠ ä»è¡¨è®°å½•æˆåŠŸï¼Œåœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰ 1001 éƒ¨é—¨</span><br><span class="line"></span><br><span class="line">insert into emp values( 2 ,&#x27;æå››&#x27;, 1005 );#æ·»åŠ ä»è¡¨è®°å½•å¤±è´¥</span><br><span class="line">ERROR 1452 ( 23000 ): Cannot addï¼ˆæ·»åŠ ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a child row: a foreign key</span><br><span class="line">constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`)</span><br><span class="line">REFERENCES `dept` (`did`)) ä»è¡¨empæ·»åŠ è®°å½•å¤±è´¥ï¼Œå› ä¸ºä¸»è¡¨deptæ²¡æœ‰ 1005 éƒ¨é—¨</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1003 | è´¢åŠ¡éƒ¨ |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | å¼ ä¸‰ | 1001 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">update emp set deptid = 1002 where eid = 1 ;#ä¿®æ”¹ä»è¡¨å¤±è´¥</span><br><span class="line">ERROR 1452 ( 23000 ): Cannot addï¼ˆæ·»åŠ ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a child rowï¼ˆå­è¡¨çš„è®°å½•ï¼‰: a foreign key constraint failsï¼ˆå¤–é”®çº¦æŸå¤±è´¥ï¼‰ (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`))  #éƒ¨é—¨è¡¨didå­—æ®µç°åœ¨æ²¡æœ‰ 1002 çš„å€¼ï¼Œæ‰€ä»¥å‘˜å·¥è¡¨ä¸­ä¸èƒ½ä¿®æ”¹å‘˜å·¥æ‰€åœ¨éƒ¨é—¨deptidä¸º 1002</span><br><span class="line"></span><br><span class="line">update dept set did = 1002 where did = 1001 ;#ä¿®æ”¹ä¸»è¡¨å¤±è´¥</span><br><span class="line">ERROR 1451 ( 23000 ): Cannot deleteï¼ˆåˆ é™¤ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a parent rowï¼ˆçˆ¶è¡¨çš„è®°å½•ï¼‰: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`)) #éƒ¨é—¨è¡¨didçš„ 1001 å­—æ®µå·²ç»è¢«empå¼•ç”¨äº†ï¼Œæ‰€ä»¥éƒ¨é—¨è¡¨çš„ 1001 å­—æ®µå°±ä¸èƒ½ä¿®æ”¹äº†ã€‚</span><br><span class="line"></span><br><span class="line">update dept set did = 1002 where did = 1003 ;#ä¿®æ”¹ä¸»è¡¨æˆåŠŸ å› ä¸ºéƒ¨é—¨è¡¨çš„ 1003 éƒ¨é—¨æ²¡æœ‰è¢«empè¡¨å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ä¿®æ”¹</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete from dept where did= 1001 ; #åˆ é™¤ä¸»è¡¨å¤±è´¥</span><br><span class="line">ERROR 1451 ( 23000 ): Cannot deleteï¼ˆåˆ é™¤ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a parent rowï¼ˆçˆ¶è¡¨è®°å½•ï¼‰: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`))  #å› ä¸ºéƒ¨é—¨è¡¨didçš„ 1001 å­—æ®µå·²ç»è¢«empå¼•ç”¨äº†ï¼Œæ‰€ä»¥éƒ¨é—¨è¡¨çš„ 1001 å­—æ®µå¯¹åº”çš„è®°å½•å°±ä¸èƒ½è¢«åˆ é™¤</span><br></pre></td></tr></table></figure></li>
</ol>
<p>æ€»ç»“ï¼šçº¦æŸå…³ç³»æ˜¯é’ˆå¯¹åŒæ–¹çš„</p>
<ul>
<li>æ·»åŠ äº†å¤–é”®çº¦æŸåï¼Œä¸»è¡¨çš„ä¿®æ”¹å’Œåˆ é™¤æ•°æ®å—çº¦æŸ</li>
<li>æ·»åŠ äº†å¤–é”®çº¦æŸåï¼Œä»è¡¨çš„æ·»åŠ å’Œä¿®æ”¹æ•°æ®å—çº¦æŸ</li>
<li>åœ¨ä»è¡¨ä¸Šå»ºç«‹å¤–é”®ï¼Œè¦æ±‚ä¸»è¡¨å¿…é¡»å­˜åœ¨</li>
<li>åˆ é™¤ä¸»è¡¨æ—¶ï¼Œè¦æ±‚ä»è¡¨ä»è¡¨å…ˆåˆ é™¤ï¼Œæˆ–å°†ä»è¡¨ä¸­å¤–é”®å¼•ç”¨è¯¥ä¸»è¡¨çš„å…³ç³»å…ˆåˆ é™¤</li>
</ul>
<h3 id="6-7-çº¦æŸç­‰çº§"><a href="#6-7-çº¦æŸç­‰çº§" class="headerlink" title="6. 7 çº¦æŸç­‰çº§"></a>6. 7 çº¦æŸç­‰çº§</h3><ul>
<li><code>Cascadeæ–¹å¼</code>ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate&#x2F;deleteè®°å½•æ—¶ï¼ŒåŒæ­¥update&#x2F;deleteæ‰å­è¡¨çš„åŒ¹é…è®°å½•</li>
<li><code>Set nullæ–¹å¼</code>ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate&#x2F;deleteè®°å½•æ—¶ï¼Œå°†å­è¡¨ä¸ŠåŒ¹é…è®°å½•çš„åˆ—è®¾ä¸ºnullï¼Œä½†æ˜¯è¦æ³¨æ„å­è¡¨çš„å¤–é”®åˆ—ä¸èƒ½ä¸ºnot null</li>
<li><code>No actionæ–¹å¼</code>ï¼šå¦‚æœå­è¡¨ä¸­æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¸å…è®¸å¯¹çˆ¶è¡¨å¯¹åº”å€™é€‰é”®è¿›è¡Œupdate&#x2F;deleteæ“ä½œ</li>
<li><code>Restrictæ–¹å¼</code>ï¼šåŒno actionï¼Œ éƒ½æ˜¯ç«‹å³æ£€æŸ¥å¤–é”®çº¦æŸ</li>
<li><code>Set defaultæ–¹å¼</code>ï¼ˆåœ¨å¯è§†åŒ–å·¥å…·SQLyogä¸­å¯èƒ½æ˜¾ç¤ºç©ºç™½ï¼‰ï¼šçˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®åˆ—è®¾ç½®æˆä¸€ä¸ªé»˜è®¤çš„å€¼ï¼Œä½†Innodbä¸èƒ½è¯†åˆ«</li>
</ul>
<p>å¦‚æœæ²¡æœ‰æŒ‡å®šç­‰çº§ï¼Œå°±ç›¸å½“äºRestrictæ–¹å¼ã€‚</p>
<p>å¯¹äºå¤–é”®çº¦æŸï¼Œæœ€å¥½æ˜¯é‡‡ç”¨: <code>ON UPDATE CASCADE ON DELETE RESTRICT</code> çš„æ–¹å¼ã€‚</p>
<p>ï¼ˆ 1 ï¼‰æ¼”ç¤º 1 ï¼šon update cascade on delete set null</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">    did int primary key, #éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar( 50 ) #éƒ¨é—¨åç§°</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">    eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar( 5 ), #å‘˜å·¥å§“å</span><br><span class="line">    deptid int, #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)  on update cascade on delete set null</span><br><span class="line">    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºçº§è”ä¿®æ”¹ç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œè®¾ç½®ä¸ºset nullç­‰çº§</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">insert into dept values( 1001 ,&#x27;æ•™å­¦éƒ¨&#x27;);</span><br><span class="line">insert into dept values( 1002 , &#x27;è´¢åŠ¡éƒ¨&#x27;);</span><br><span class="line">insert into dept values( 1003 , &#x27;å’¨è¯¢éƒ¨&#x27;);</span><br><span class="line"></span><br><span class="line">insert into emp values( 1 ,&#x27;å¼ ä¸‰&#x27;, 1001 ); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨</span><br><span class="line">insert into emp values( 2 ,&#x27;æå››&#x27;, 1001 );</span><br><span class="line">insert into emp values( 3 ,&#x27;ç‹äº”&#x27;, 1002 );</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#ä¿®æ”¹ä¸»è¡¨æˆåŠŸï¼Œä»è¡¨ä¹Ÿè·Ÿç€ä¿®æ”¹ï¼Œä¿®æ”¹äº†ä¸»è¡¨è¢«å¼•ç”¨çš„å­—æ®µ1002ä¸º1004ï¼Œä»è¡¨çš„å¼•ç”¨å­—æ®µå°±è·Ÿç€ä¿®æ”¹ä¸º1004äº†</span><br><span class="line">mysql&gt; update dept set did = 1004 where did = 1002 ;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1 Changed: 1 Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ | #åŸæ¥æ˜¯ 1002 ï¼Œä¿®æ”¹ä¸º 1004</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | å¼ ä¸‰ | 1001 |</span><br><span class="line">| 2 | æå›› | 1001 |</span><br><span class="line">| 3 | ç‹äº” | 1004 | #åŸæ¥æ˜¯ 1002 ï¼Œè·Ÿç€ä¿®æ”¹ä¸º 1004</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µçš„å€¼è¢«ä¿®æ”¹ä¸ºnull</span><br><span class="line">mysql&gt; delete from dept where did = 1001 ;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname | #è®°å½• 1001 éƒ¨é—¨è¢«åˆ é™¤äº†</span><br><span class="line">+------+--------+</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | å¼ ä¸‰ | NULL | #åŸæ¥å¼•ç”¨ 1001 éƒ¨é—¨çš„å‘˜å·¥ï¼Œdeptidå­—æ®µå˜ä¸ºnull</span><br><span class="line">| 2 | æå›› | NULL |</span><br><span class="line">| 3 | ç‹äº” | 1004 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ 2 ï¼‰æ¼”ç¤º 2 ï¼šon update set null on delete cascade</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">    did int primary key, #éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar( 50 ) #éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">    eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar( 5 ), #å‘˜å·¥å§“å</span><br><span class="line">    deptid int, #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)  on update set null on delete cascade</span><br><span class="line">    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºset nullç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œè®¾ç½®ä¸ºçº§è”åˆ é™¤ç­‰çº§</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">insert into dept values( 1001 ,&#x27;æ•™å­¦éƒ¨&#x27;);</span><br><span class="line">insert into dept values( 1002 , &#x27;è´¢åŠ¡éƒ¨&#x27;);</span><br><span class="line">insert into dept values( 1003 , &#x27;å’¨è¯¢éƒ¨&#x27;);</span><br><span class="line"></span><br><span class="line">insert into emp values( 1 ,&#x27;å¼ ä¸‰&#x27;, 1001 ); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰ 1001 éƒ¨é—¨</span><br><span class="line">insert into emp values( 2 ,&#x27;æå››&#x27;, 1001 );</span><br><span class="line">insert into emp values( 3 ,&#x27;ç‹äº”&#x27;, 1002 );</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1002 | è´¢åŠ¡éƒ¨ |</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | å¼ ä¸‰ | 1001 |</span><br><span class="line">| 2 | æå›› | 1001 |</span><br><span class="line">| 3 | ç‹äº” | 1002 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname |#ä¿®æ”¹ä¸»è¡¨ï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µè®¾ç½®ä¸ºnull</span><br><span class="line">mysql&gt; update dept set did = 1004 where did = 1002 ;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1 Changed: 1 Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ | #åŸæ¥didæ˜¯ 1002</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | å¼ ä¸‰ | 1001 |</span><br><span class="line">| 2 | æå›› | 1001 |</span><br><span class="line">| 3 | ç‹äº” | NULL | #åŸæ¥deptidæ˜¯ 1002 ï¼Œå› ä¸ºéƒ¨é—¨è¡¨ 1002 è¢«ä¿®æ”¹äº†ï¼Œ 1002 æ²¡æœ‰å¯¹åº”çš„äº†ï¼Œå°±è®¾ç½®ä¸ºnull</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä¸»è¡¨çš„ 1001 è¡Œè¢«åˆ é™¤äº†ï¼Œä»è¡¨ç›¸åº”çš„è®°å½•ä¹Ÿè¢«åˆ é™¤äº†</span><br><span class="line">mysql&gt; delete from dept where did= 1001 ;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname | #éƒ¨é—¨è¡¨ä¸­ 1001 éƒ¨é—¨è¢«åˆ é™¤</span><br><span class="line">+------+--------+</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |#åŸæ¥ 1001 éƒ¨é—¨çš„å‘˜å·¥ä¹Ÿè¢«åˆ é™¤äº†</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 3 | ç‹äº” | NULL |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ 3 ï¼‰æ¼”ç¤ºï¼šon update cascade on delete cascade</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">    did int primary key, #éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar( 50 ) #éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">    eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar( 5 ), #å‘˜å·¥å§“å</span><br><span class="line">    deptid int, #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)  on update cascade on delete cascade</span><br><span class="line">    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºçº§è”ä¿®æ”¹ç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œä¹Ÿè®¾ç½®ä¸ºçº§è”åˆ é™¤ç­‰çº§</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">insert into dept values( 1001 ,&#x27;æ•™å­¦éƒ¨&#x27;);</span><br><span class="line">insert into dept values( 1002 , &#x27;è´¢åŠ¡éƒ¨&#x27;);</span><br><span class="line">insert into dept values( 1003 , &#x27;å’¨è¯¢éƒ¨&#x27;);</span><br><span class="line"></span><br><span class="line">insert into emp values( 1 ,&#x27;å¼ ä¸‰&#x27;, 1001 ); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨</span><br><span class="line">insert into emp values( 2 ,&#x27;æå››&#x27;, 1001 );</span><br><span class="line">insert into emp values( 3 ,&#x27;ç‹äº”&#x27;, 1002 );</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1002 | è´¢åŠ¡éƒ¨ |</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | å¼ ä¸‰ | 1001 |</span><br><span class="line">| 2 | æå›› | 1001 |</span><br><span class="line">| 3 | ç‹äº” | 1002 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#ä¿®æ”¹ä¸»è¡¨ï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µè‡ªåŠ¨ä¿®æ”¹</span><br><span class="line">mysql&gt; update dept set did = 1004 where did = 1002 ;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1 Changed: 1 Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ | #éƒ¨é—¨ 1002 ä¿®æ”¹ä¸º 1004</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | å¼ ä¸‰ | 1001 |</span><br><span class="line">| 2 | æå›› | 1001 |</span><br><span class="line">| 3 | ç‹äº” | 1004 | #çº§è”ä¿®æ”¹</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä¸»è¡¨çš„ 1001 è¡Œè¢«åˆ é™¤äº†ï¼Œä»è¡¨ç›¸åº”çš„è®°å½•ä¹Ÿè¢«åˆ é™¤äº†</span><br><span class="line">mysql&gt; delete from dept where did= 1001 ;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname | #1001éƒ¨é—¨è¢«åˆ é™¤äº†</span><br><span class="line">+------+--------+</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |  #1001éƒ¨é—¨çš„å‘˜å·¥ä¹Ÿè¢«åˆ é™¤äº†</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 3 | ç‹äº” | 1004 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="6-8-åˆ é™¤å¤–é”®çº¦æŸ"><a href="#6-8-åˆ é™¤å¤–é”®çº¦æŸ" class="headerlink" title="6. 8 åˆ é™¤å¤–é”®çº¦æŸ"></a>6. 8 åˆ é™¤å¤–é”®çº¦æŸ</h3><p>æµç¨‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">( 1 )ç¬¬ä¸€æ­¥å…ˆæŸ¥çœ‹çº¦æŸåå’Œåˆ é™¤å¤–é”®çº¦æŸ</span><br><span class="line">SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;è¡¨åç§°&#x27;;#æŸ¥çœ‹æŸä¸ªè¡¨çš„çº¦æŸå</span><br><span class="line"></span><br><span class="line">ALTER TABLE ä»è¡¨å DROP FOREIGN KEY å¤–é”®çº¦æŸå;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ï¼ˆ 2 ï¼‰ç¬¬äºŒæ­¥æŸ¥çœ‹ç´¢å¼•åå’Œåˆ é™¤ç´¢å¼•ã€‚ï¼ˆæ³¨æ„ï¼Œåªèƒ½æ‰‹åŠ¨åˆ é™¤ï¼‰</span><br><span class="line">SHOW INDEX FROM è¡¨åç§°; #æŸ¥çœ‹æŸä¸ªè¡¨çš„ç´¢å¼•å</span><br><span class="line"></span><br><span class="line">ALTER TABLE ä»è¡¨å DROP INDEX ç´¢å¼•å;</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;emp&#x27;;</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table emp drop foreign key emp_ibfk_1;</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line">Records: 0 Duplicates: 0 Warnings: 0</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show index from emp;</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table emp drop index deptid;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line">Records: 0 Duplicates: 0 Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt;  show index from emp;</span><br></pre></td></tr></table></figure>
<h3 id="6-9-å¼€å‘åœºæ™¯"><a href="#6-9-å¼€å‘åœºæ™¯" class="headerlink" title="6. 9 å¼€å‘åœºæ™¯"></a>6. 9 å¼€å‘åœºæ™¯</h3><p><strong>é—®é¢˜ 1 ï¼šå¦‚æœä¸¤ä¸ªè¡¨ä¹‹é—´æœ‰å…³ç³»ï¼ˆä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šï¼‰ï¼Œæ¯”å¦‚ï¼šå‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨ï¼ˆä¸€å¯¹å¤šï¼‰ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯å¦ä¸€å®šè¦å»ºå¤–é”®çº¦æŸï¼Ÿ</strong></p>
<p>ç­”ï¼šä¸æ˜¯çš„</p>
<p><strong>é—®é¢˜ 2 ï¼šå»ºå’Œä¸å»ºå¤–é”®çº¦æŸæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p>ç­”ï¼šå»ºå¤–é”®çº¦æŸï¼Œä½ çš„æ“ä½œï¼ˆåˆ›å»ºè¡¨ã€åˆ é™¤è¡¨ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰ä¼šå—åˆ°é™åˆ¶ï¼Œä»è¯­æ³•å±‚é¢å—åˆ°é™åˆ¶ã€‚ä¾‹å¦‚ï¼šåœ¨å‘˜å·¥è¡¨ä¸­ä¸å¯èƒ½æ·»åŠ ä¸€ä¸ªå‘˜å·¥ä¿¡æ¯ï¼Œå®ƒçš„éƒ¨é—¨çš„å€¼åœ¨éƒ¨é—¨è¡¨ä¸­æ‰¾ä¸åˆ°ã€‚</p>
<p>ä¸å»ºå¤–é”®çº¦æŸï¼Œä½ çš„æ“ä½œï¼ˆåˆ›å»ºè¡¨ã€åˆ é™¤è¡¨ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰ä¸å—é™åˆ¶ï¼Œè¦ä¿è¯æ•°æ®çš„<code>å¼•ç”¨å®Œæ•´æ€§</code>ï¼Œåªèƒ½<code>ä¾é ç¨‹åºå‘˜çš„è‡ªè§‰</code>ï¼Œæˆ–è€…æ˜¯<code>åœ¨Javaç¨‹åºä¸­è¿›è¡Œé™å®š</code>ã€‚ä¾‹å¦‚ï¼šåœ¨å‘˜å·¥è¡¨ä¸­ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªå‘˜å·¥çš„ä¿¡æ¯ï¼Œå®ƒçš„éƒ¨é—¨æŒ‡å®šä¸ºä¸€ä¸ªå®Œå…¨ä¸å­˜åœ¨çš„éƒ¨é—¨ã€‚</p>
<p><strong>é—®é¢˜ 3 ï¼šé‚£ä¹ˆå»ºå’Œä¸å»ºå¤–é”®çº¦æŸå’ŒæŸ¥è¯¢æœ‰æ²¡æœ‰å…³ç³»ï¼Ÿ</strong></p>
<p>ç­”ï¼šæ²¡æœ‰</p>
<blockquote>
<p>åœ¨ MySQL é‡Œï¼Œå¤–é”®çº¦æŸæ˜¯æœ‰æˆæœ¬çš„ï¼Œéœ€è¦æ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚å¯¹äºå¤§å¹¶å‘çš„ SQL æ“ä½œï¼Œæœ‰å¯èƒ½ä¼šä¸é€‚åˆã€‚æ¯”å¦‚å¤§å‹ç½‘ç«™çš„ä¸­å¤®æ•°æ®åº“ï¼Œå¯èƒ½ä¼š<code>å› ä¸ºå¤–é”®çº¦æŸçš„ç³»ç»Ÿå¼€é”€è€Œå˜å¾—éå¸¸æ…¢</code>ã€‚æ‰€ä»¥ï¼Œ MySQL å…è®¸ä½ ä¸ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å¤–é”®çº¦æŸï¼Œåœ¨<code>åº”ç”¨å±‚é¢</code>å®Œæˆæ£€æŸ¥æ•°æ®ä¸€è‡´æ€§çš„é€»è¾‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ä½ ä¸ç”¨å¤–é”®çº¦æŸï¼Œä¹Ÿè¦æƒ³åŠæ³•é€šè¿‡åº”ç”¨å±‚é¢çš„é™„åŠ é€»è¾‘ï¼Œæ¥å®ç°å¤–é”®çº¦æŸçš„åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p>
</blockquote>
<h3 id="6-10-é˜¿é‡Œå¼€å‘è§„èŒƒ"><a href="#6-10-é˜¿é‡Œå¼€å‘è§„èŒƒ" class="headerlink" title="6. 10 é˜¿é‡Œå¼€å‘è§„èŒƒ"></a>6. 10 é˜¿é‡Œå¼€å‘è§„èŒƒ</h3><p>ã€<code>å¼ºåˆ¶</code>ã€‘ä¸å¾—ä½¿ç”¨å¤–é”®ä¸çº§è”ï¼Œä¸€åˆ‡å¤–é”®æ¦‚å¿µå¿…é¡»åœ¨åº”ç”¨å±‚è§£å†³ã€‚</p>
<p>è¯´æ˜ï¼šï¼ˆæ¦‚å¿µè§£é‡Šï¼‰å­¦ç”Ÿè¡¨ä¸­çš„ student_id æ˜¯ä¸»é”®ï¼Œé‚£ä¹ˆæˆç»©è¡¨ä¸­çš„ student_id åˆ™ä¸ºå¤–é”®ã€‚å¦‚æœæ›´æ–°å­¦ç”Ÿè¡¨ä¸­çš„ student_idï¼ŒåŒæ—¶è§¦å‘æˆç»©è¡¨ä¸­çš„ student_id æ›´æ–°ï¼Œå³ä¸ºçº§è”æ›´æ–°ã€‚å¤–é”®ä¸çº§è”æ›´æ–°é€‚ç”¨äº<code>å•æœºä½å¹¶å‘</code>ï¼Œä¸é€‚åˆ<code>åˆ†å¸ƒå¼</code>ã€<code>é«˜å¹¶å‘é›†ç¾¤</code>ï¼›çº§è”æ›´æ–°æ˜¯å¼ºé˜»å¡ï¼Œå­˜åœ¨æ•°æ®åº“<code>æ›´æ–°é£æš´</code>çš„é£é™©ï¼›å¤–é”®å½±å“æ•°æ®åº“çš„<code>æ’å…¥é€Ÿåº¦</code>ã€‚</p>
<hr>
<h2 id="7-CHECK-çº¦æŸ"><a href="#7-CHECK-çº¦æŸ" class="headerlink" title="7. CHECK çº¦æŸ"></a>7. CHECK çº¦æŸ</h2><hr>
<h3 id="7-1-ä½œç”¨"><a href="#7-1-ä½œç”¨" class="headerlink" title="7. 1 ä½œç”¨"></a>7. 1 ä½œç”¨</h3><p>æ£€æŸ¥æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦ç¬¦å·xxè¦æ±‚ï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯å€¼çš„èŒƒå›´</p>
<h3 id="7-2-ã€å…³é”®å­—"><a href="#7-2-ã€å…³é”®å­—" class="headerlink" title="7. 2 ã€å…³é”®å­—"></a>7. 2 ã€å…³é”®å­—</h3><p>CHECK</p>
<h3 id="7-3-ã€è¯´æ˜ï¼šMySQL-5-7-ä¸æ”¯æŒ"><a href="#7-3-ã€è¯´æ˜ï¼šMySQL-5-7-ä¸æ”¯æŒ" class="headerlink" title="7. 3 ã€è¯´æ˜ï¼šMySQL 5. 7 ä¸æ”¯æŒ"></a>7. 3 ã€è¯´æ˜ï¼šMySQL 5. 7 ä¸æ”¯æŒ</h3><p>MySQL5.7 å¯ä»¥ä½¿ç”¨checkçº¦æŸï¼Œä½†checkçº¦æŸå¯¹æ•°æ®éªŒè¯æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚æ·»åŠ æ•°æ®æ—¶ï¼Œæ²¡æœ‰ä»»ä½•é”™è¯¯æˆ–è­¦å‘Š</p>
<p>ä½†æ˜¯ <strong>MySQL 8.0ä¸­å¯ä»¥ä½¿ç”¨checkçº¦æŸäº†</strong> ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">    eid int primary key,</span><br><span class="line">    ename varchar( 5 ),</span><br><span class="line">    gender char check (&#x27;ç”·&#x27; or &#x27;å¥³&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into employee values( 1 ,&#x27;å¼ ä¸‰&#x27;,&#x27;å¦–&#x27;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from employee;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | gender |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | å¼ ä¸‰ | å¦– |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å†ä¸¾ä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE temp(</span><br><span class="line">    id INT AUTO_INCREMENT,</span><br><span class="line">    NAME VARCHAR( 20 ),</span><br><span class="line">    age INT CHECK(age &gt; 20 ),</span><br><span class="line">    PRIMARY KEY(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>å†ä¸¾ä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">age tinyint check(age &gt; 20 ) æˆ– sex char( 2 ) check(sex in(â€˜ç”·â€™,â€™å¥³â€™))</span><br></pre></td></tr></table></figure>
</li>
<li><p>å†ä¸¾ä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHECK(height&gt;= 0 AND height&lt; 3 )</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="8-DEFAULTçº¦æŸ"><a href="#8-DEFAULTçº¦æŸ" class="headerlink" title="8. DEFAULTçº¦æŸ"></a>8. DEFAULTçº¦æŸ</h2><hr>
<h3 id="8-1-ä½œç”¨"><a href="#8-1-ä½œç”¨" class="headerlink" title="8. 1 ä½œç”¨"></a>8. 1 ä½œç”¨</h3><p>ç»™æŸä¸ªå­—æ®µ&#x2F;æŸåˆ—æŒ‡å®šé»˜è®¤å€¼ï¼Œä¸€æ—¦è®¾ç½®é»˜è®¤å€¼ï¼Œåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœæ­¤å­—æ®µæ²¡æœ‰æ˜¾å¼èµ‹å€¼ï¼Œåˆ™èµ‹å€¼ä¸ºé»˜è®¤å€¼ã€‚</p>
<h3 id="8-2-å…³é”®å­—"><a href="#8-2-å…³é”®å­—" class="headerlink" title="8. 2 å…³é”®å­—"></a>8. 2 å…³é”®å­—</h3><p>DEFAULT</p>
<h3 id="8-3-å¦‚ä½•ç»™å­—æ®µåŠ é»˜è®¤å€¼"><a href="#8-3-å¦‚ä½•ç»™å­—æ®µåŠ é»˜è®¤å€¼" class="headerlink" title="8. 3 å¦‚ä½•ç»™å­—æ®µåŠ é»˜è®¤å€¼"></a>8. 3 å¦‚ä½•ç»™å­—æ®µåŠ é»˜è®¤å€¼</h3><p>(1) å»ºè¡¨æ—¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ primary key,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ unique key not null,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ unique key,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,</span><br><span class="line">);</span><br><span class="line">create table è¡¨åç§°(</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼ ,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,</span><br><span class="line">    primary key(å­—æ®µå),</span><br><span class="line">    unique key(å­—æ®µå)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">è¯´æ˜ï¼šé»˜è®¤å€¼çº¦æŸä¸€èˆ¬ä¸åœ¨å”¯ä¸€é”®å’Œä¸»é”®åˆ—ä¸ŠåŠ </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">    eid int primary key,</span><br><span class="line">    ename varchar( 20 ) not null,</span><br><span class="line">    gender char default &#x27;ç”·&#x27;,</span><br><span class="line">    tel char( 11 ) not null default &#x27;&#x27; #é»˜è®¤æ˜¯ç©ºå­—ç¬¦ä¸²</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | NO | | NULL | |</span><br><span class="line">| gender | char( 1 ) | YES | | ç”· | |</span><br><span class="line">| tel | char( 11 ) | NO | | | |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into employee values( 1 ,&#x27;æ±ªé£&#x27;,&#x27;ç”·&#x27;,&#x27;13700102535&#x27;); #æˆåŠŸ</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from employee;</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">| eid | ename | gender | tel |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">| 1 | æ±ªé£ | ç”· | 13700102535 |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into employee(eid,ename) values( 2 ,&#x27;å¤©çª&#x27;); #æˆåŠŸ</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from employee;</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">| eid | ename | gender | tel |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">| 1 | æ±ªé£ | ç”· | 13700102535 |</span><br><span class="line">| 2 | å¤©çª | ç”· | |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into employee(eid,ename) values( 3 ,&#x27;äºŒè™&#x27;);</span><br><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;&#x27; for key &#x27;tel&#x27;</span><br><span class="line">#å¦‚æœtelæœ‰å”¯ä¸€æ€§çº¦æŸçš„è¯ä¼šæŠ¥é”™ï¼Œå¦‚æœtelæ²¡æœ‰å”¯ä¸€æ€§çº¦æŸï¼Œå¯ä»¥æ·»åŠ æˆåŠŸ</span><br></pre></td></tr></table></figure>

<p>å†ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE myemp(</span><br><span class="line">    id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">    NAME VARCHAR( 15 ),</span><br><span class="line">    salary DOUBLE( 10 , 2 ) DEFAULT 2000</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>(2) å»ºè¡¨å</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼;</span><br><span class="line"></span><br><span class="line">#å¦‚æœè¿™ä¸ªå­—æ®µåŸæ¥æœ‰éç©ºçº¦æŸï¼Œä½ è¿˜ä¿ç•™éç©ºçº¦æŸï¼Œé‚£ä¹ˆåœ¨åŠ é»˜è®¤å€¼çº¦æŸæ—¶ï¼Œè¿˜å¾—ä¿ç•™éç©ºçº¦æŸï¼Œå¦åˆ™éç©ºçº¦æŸå°±è¢«åˆ é™¤äº†</span><br><span class="line">#åŒç†ï¼Œåœ¨ç»™æŸä¸ªå­—æ®µåŠ éç©ºçº¦æŸä¹Ÿä¸€æ ·ï¼Œå¦‚æœè¿™ä¸ªå­—æ®µåŸæ¥æœ‰é»˜è®¤å€¼çº¦æŸï¼Œä½ æƒ³ä¿ç•™ï¼Œä¹Ÿè¦åœ¨modifyè¯­å¥ä¸­ä¿ç•™é»˜è®¤å€¼çº¦æŸï¼Œå¦åˆ™å°±åˆ é™¤äº†</span><br><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼ not null;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">eid int primary key,</span><br><span class="line">ename varchar( 20 ),</span><br><span class="line">gender char,</span><br><span class="line">tel char( 11 ) not null</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">| gender | char( 1 ) | YES | | NULL | |</span><br><span class="line">| tel | char( 11 ) | NO | | NULL | |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify gender char default &#x27;ç”·&#x27;;  #ç»™genderå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸ</span><br><span class="line">alter table employee modify tel char( 11 ) default &#x27;&#x27;; #ç»™telå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">| gender | char( 1 ) | YES | | ç”· | |</span><br><span class="line">| tel | char( 11 ) | YES | | | |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify tel char( 11 ) default &#x27;&#x27; not null;#ç»™telå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸï¼Œå¹¶ä¿ç•™éç©ºçº¦æŸ</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">| gender | char( 1 ) | YES | | ç”· | |</span><br><span class="line">| tel | char( 11 ) | NO | | | |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="8-4-å¦‚ä½•åˆ é™¤é»˜è®¤å€¼çº¦æŸ"><a href="#8-4-å¦‚ä½•åˆ é™¤é»˜è®¤å€¼çº¦æŸ" class="headerlink" title="8. 4 å¦‚ä½•åˆ é™¤é»˜è®¤å€¼çº¦æŸ"></a>8. 4 å¦‚ä½•åˆ é™¤é»˜è®¤å€¼çº¦æŸ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ ;#åˆ é™¤é»˜è®¤å€¼çº¦æŸï¼Œä¹Ÿä¸ä¿ç•™éç©ºçº¦æŸ</span><br><span class="line"></span><br><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ not null; #åˆ é™¤é»˜è®¤å€¼çº¦æŸï¼Œä¿ç•™éç©ºçº¦æŸ</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify gender char; #åˆ é™¤genderå­—æ®µé»˜è®¤å€¼çº¦æŸï¼Œå¦‚æœæœ‰éç©ºçº¦æŸï¼Œä¹Ÿä¸€å¹¶åˆ é™¤</span><br><span class="line">alter table employee modify tel char( 11 )  not null;#åˆ é™¤telå­—æ®µé»˜è®¤å€¼çº¦æŸï¼Œä¿ç•™éç©ºçº¦æŸ</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">| gender | char( 1 ) | YES | | NULL | |</span><br><span class="line">| tel | char( 11 ) | NO | | NULL | |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="9-é¢è¯•"><a href="#9-é¢è¯•" class="headerlink" title="9. é¢è¯•"></a>9. é¢è¯•</h2><hr>
<p><strong>é¢è¯• 1 ã€ä¸ºä»€ä¹ˆå»ºè¡¨æ—¶ï¼ŒåŠ  not null default â€˜â€™ æˆ– default 0</strong></p>
<p>ç­”ï¼šä¸æƒ³è®©è¡¨ä¸­å‡ºç°nullå€¼ã€‚</p>
<p><strong>é¢è¯• 2 ã€ä¸ºä»€ä¹ˆä¸æƒ³è¦ null çš„å€¼</strong></p>
<p>ç­”:ï¼ˆ 1 ï¼‰ä¸å¥½æ¯”è¾ƒã€‚nullæ˜¯ä¸€ç§ç‰¹æ®Šå€¼ï¼Œæ¯”è¾ƒæ—¶åªèƒ½ç”¨ä¸“é—¨çš„is null å’Œ is not nullæ¥æ¯”è¾ƒã€‚ç¢°åˆ°è¿ç®—ç¬¦ï¼Œé€šå¸¸è¿”å›nullã€‚</p>
<p>ï¼ˆ 2 ï¼‰æ•ˆç‡ä¸é«˜ã€‚å½±å“æé«˜ç´¢å¼•æ•ˆæœã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¾€å¾€åœ¨å»ºè¡¨æ—¶ not null default â€˜â€™ æˆ– default 0</p>
<p><strong>é¢è¯• 3 ã€å¸¦AUTO_INCREMENTçº¦æŸçš„å­—æ®µå€¼æ˜¯ä» 1 å¼€å§‹çš„å—ï¼Ÿ</strong> </p>
<p>ç­”ï¼šåœ¨MySQLä¸­ï¼Œé»˜è®¤AUTO_INCREMENTçš„åˆå§‹å€¼æ˜¯ 1 ï¼Œæ¯æ–°å¢ä¸€æ¡è®°å½•ï¼Œå­—æ®µå€¼è‡ªåŠ¨åŠ  1 ã€‚è®¾ç½®è‡ªå¢å±æ€§ï¼ˆAUTO_INCREMENTï¼‰çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥æŒ‡å®šç¬¬ä¸€æ¡æ’å…¥è®°å½•çš„è‡ªå¢å­—æ®µçš„å€¼ï¼Œè¿™æ ·æ–°æ’å…¥çš„è®°å½•çš„è‡ªå¢å­—æ®µå€¼ä»åˆå§‹å€¼å¼€å§‹é€’å¢ï¼Œå¦‚åœ¨è¡¨ä¸­æ’å…¥ç¬¬ä¸€æ¡è®°å½•ï¼ŒåŒæ—¶æŒ‡å®šidå€¼ä¸º 5 ï¼Œåˆ™ä»¥åæ’å…¥çš„è®°å½•çš„idå€¼å°±ä¼šä» 6 å¼€å§‹å¾€ä¸Šå¢åŠ ã€‚æ·»åŠ ä¸»é”®çº¦æŸæ—¶ï¼Œå¾€å¾€éœ€è¦è®¾ç½®å­—æ®µè‡ªåŠ¨å¢åŠ å±æ€§ã€‚</p>
<p><strong>é¢è¯• 4 ã€å¹¶ä¸æ˜¯æ¯ä¸ªè¡¨éƒ½å¯ä»¥ä»»æ„é€‰æ‹©å­˜å‚¨å¼•æ“ï¼Ÿ</strong> </p>
<p>ç­”ï¼šå¤–é”®çº¦æŸï¼ˆFOREIGN KEYï¼‰ä¸èƒ½è·¨å¼•æ“ä½¿ç”¨ã€‚<br>MySQLæ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œæ¯ä¸€ä¸ªè¡¨éƒ½å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¤–é”®çº¦æŸæ˜¯ç”¨æ¥ä¿è¯æ•°æ®çš„å‚ç…§å®Œæ•´æ€§çš„ï¼Œå¦‚æœè¡¨ä¹‹é—´éœ€è¦å…³è”å¤–é”®ï¼Œå´æŒ‡å®šäº†ä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œé‚£ä¹ˆè¿™äº›è¡¨ä¹‹é—´æ˜¯ä¸èƒ½åˆ›å»ºå¤–é”®çº¦æŸçš„ã€‚æ‰€ä»¥è¯´ï¼Œå­˜å‚¨å¼•æ“çš„é€‰æ‹©ä¹Ÿä¸å®Œå…¨æ˜¯éšæ„çš„ã€‚</p>
<hr>
<p>ç¬”è®°åˆ›å»ºè€…ï¼šç‹åœ³</p>
<p>å‚è€ƒè®²å¸ˆï¼šå°šç¡…è°· å®‹çº¢åº·ï¼ˆæ±Ÿæ¹–äººç§°ï¼šåº·å¸ˆå‚…ï¼‰</p>

      <div>
        
          <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------æœ¬ æ–‡ ç»“ æŸ <i class="fa fa-paw"></i> æ„Ÿ è°¢ æ‚¨ çš„ é˜… è¯»-------------</div>
    
</div>
        
      </div>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/MySQL/" rel="tag"># MySQL</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/04/17/%E7%AC%AC12%E7%AB%A0-MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%B2%BE%E8%AE%B2/" rel="prev" title="ç¬¬12ç« _MySQLæ•°æ®ç±»å‹ç²¾è®²">
      <i class="fa fa-chevron-left"></i> ç¬¬12ç« _MySQLæ•°æ®ç±»å‹ç²¾è®²
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/04/20/%E7%AC%AC14%E7%AB%A0-%E8%A7%86%E5%9B%BE/" rel="next" title="ç¬¬14ç« _è§†å›¾">
      ç¬¬14ç« _è§†å›¾ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E7%BA%A6%E6%9D%9F-constraint-%E6%A6%82%E8%BF%B0"><span class="nav-text">1. çº¦æŸ(constraint)æ¦‚è¿°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E7%BA%A6%E6%9D%9F"><span class="nav-text">1. 1 ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%A6%E6%9D%9F"><span class="nav-text">1. 2 ä»€ä¹ˆæ˜¯çº¦æŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-text">1. 3 çº¦æŸçš„åˆ†ç±»</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="nav-text">2. éç©ºçº¦æŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E4%BD%9C%E7%94%A8"><span class="nav-text">2. 1 ä½œç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">2. 2 å…³é”®å­—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-%E7%89%B9%E7%82%B9"><span class="nav-text">2. 3 ç‰¹ç‚¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-%E6%B7%BB%E5%8A%A0%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="nav-text">2. 4 æ·»åŠ éç©ºçº¦æŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-%E5%88%A0%E9%99%A4%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="nav-text">2. 5 åˆ é™¤éç©ºçº¦æŸ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%94%AF%E4%B8%80%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="nav-text">3. å”¯ä¸€æ€§çº¦æŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E4%BD%9C%E7%94%A8"><span class="nav-text">3. 1 ä½œç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">3. 2 å…³é”®å­—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E7%89%B9%E7%82%B9"><span class="nav-text">3. 3 ç‰¹ç‚¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-%E6%B7%BB%E5%8A%A0%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="nav-text">3. 4 æ·»åŠ å”¯ä¸€çº¦æŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-%E5%85%B3%E4%BA%8E%E5%A4%8D%E5%90%88%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="nav-text">3. 5 å…³äºå¤åˆå”¯ä¸€çº¦æŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-%E5%88%A0%E9%99%A4%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="nav-text">3. 6 åˆ é™¤å”¯ä¸€çº¦æŸ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-PRIMARY-KEY-%E7%BA%A6%E6%9D%9F"><span class="nav-text">4. PRIMARY KEY çº¦æŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-%E4%BD%9C%E7%94%A8"><span class="nav-text">4. 1 ä½œç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">4. 2 å…³é”®å­—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-%E7%89%B9%E7%82%B9"><span class="nav-text">4. 3 ç‰¹ç‚¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-text">4. 4 æ·»åŠ ä¸»é”®çº¦æŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-%E5%85%B3%E4%BA%8E%E5%A4%8D%E5%90%88%E4%B8%BB%E9%94%AE"><span class="nav-text">4. 5 å…³äºå¤åˆä¸»é”®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-6-%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-text">4. 6 åˆ é™¤ä¸»é”®çº¦æŸ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E8%87%AA%E5%A2%9E%E5%88%97%EF%BC%9AAUTO-INCREMENT"><span class="nav-text">5. è‡ªå¢åˆ—ï¼šAUTO_INCREMENT</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E4%BD%9C%E7%94%A8"><span class="nav-text">5. 1 ä½œç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">5. 2 å…³é”®å­—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-%E7%89%B9%E7%82%B9%E5%92%8C%E8%A6%81%E6%B1%82"><span class="nav-text">5. 3 ç‰¹ç‚¹å’Œè¦æ±‚</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-%E5%A6%82%E4%BD%95%E6%8C%87%E5%AE%9A%E8%87%AA%E5%A2%9E%E7%BA%A6%E6%9D%9F"><span class="nav-text">5. 4 å¦‚ä½•æŒ‡å®šè‡ªå¢çº¦æŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4%E8%87%AA%E5%A2%9E%E7%BA%A6%E6%9D%9F"><span class="nav-text">5. 5 å¦‚ä½•åˆ é™¤è‡ªå¢çº¦æŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-6-MySQL-8-0-%E6%96%B0%E7%89%B9%E6%80%A7%E2%80%94%E8%87%AA%E5%A2%9E%E5%8F%98%E9%87%8F%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96"><span class="nav-text">5. 6 MySQL 8. 0 æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-FOREIGN-KEY-%E7%BA%A6%E6%9D%9F"><span class="nav-text">6. FOREIGN KEY çº¦æŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-%E4%BD%9C%E7%94%A8"><span class="nav-text">6. 1 ä½œç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">6. 2 å…³é”®å­—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-%E4%B8%BB%E8%A1%A8%E5%92%8C%E4%BB%8E%E8%A1%A8-x2F-%E7%88%B6%E8%A1%A8%E5%92%8C%E5%AD%90%E8%A1%A8"><span class="nav-text">6. 3 ä¸»è¡¨å’Œä»è¡¨&#x2F;çˆ¶è¡¨å’Œå­è¡¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-%E7%89%B9%E7%82%B9"><span class="nav-text">6. 4 ç‰¹ç‚¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-5-%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-text">6. 5 æ·»åŠ å¤–é”®çº¦æŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-%E6%BC%94%E7%A4%BA%E9%97%AE%E9%A2%98"><span class="nav-text">6. 6 æ¼”ç¤ºé—®é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-7-%E7%BA%A6%E6%9D%9F%E7%AD%89%E7%BA%A7"><span class="nav-text">6. 7 çº¦æŸç­‰çº§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-8-%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-text">6. 8 åˆ é™¤å¤–é”®çº¦æŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-9-%E5%BC%80%E5%8F%91%E5%9C%BA%E6%99%AF"><span class="nav-text">6. 9 å¼€å‘åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-10-%E9%98%BF%E9%87%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83"><span class="nav-text">6. 10 é˜¿é‡Œå¼€å‘è§„èŒƒ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-CHECK-%E7%BA%A6%E6%9D%9F"><span class="nav-text">7. CHECK çº¦æŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-%E4%BD%9C%E7%94%A8"><span class="nav-text">7. 1 ä½œç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-%E3%80%81%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">7. 2 ã€å…³é”®å­—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-%E3%80%81%E8%AF%B4%E6%98%8E%EF%BC%9AMySQL-5-7-%E4%B8%8D%E6%94%AF%E6%8C%81"><span class="nav-text">7. 3 ã€è¯´æ˜ï¼šMySQL 5. 7 ä¸æ”¯æŒ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-DEFAULT%E7%BA%A6%E6%9D%9F"><span class="nav-text">8. DEFAULTçº¦æŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-%E4%BD%9C%E7%94%A8"><span class="nav-text">8. 1 ä½œç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">8. 2 å…³é”®å­—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-%E5%A6%82%E4%BD%95%E7%BB%99%E5%AD%97%E6%AE%B5%E5%8A%A0%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="nav-text">8. 3 å¦‚ä½•ç»™å­—æ®µåŠ é»˜è®¤å€¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4%E9%BB%98%E8%AE%A4%E5%80%BC%E7%BA%A6%E6%9D%9F"><span class="nav-text">8. 4 å¦‚ä½•åˆ é™¤é»˜è®¤å€¼çº¦æŸ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E9%9D%A2%E8%AF%95"><span class="nav-text">9. é¢è¯•</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Wang Zhen"
      src="/uploads/avatar.png#/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Wang Zhen</p>
  <div class="site-description" itemprop="description">è¯·å‡ºç¤ºè¡Œç¨‹ç ã€å¥åº·ç ï¼Œé…æˆ´å¥½å£ç½©æµè§ˆæœ¬ç«™ğŸ˜œ</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/new-Wangz" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;new-Wangz" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:mrwangz@qq.com" title="E-Mail â†’ mailto:mrwangz@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5514641355" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5514641355" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-cat"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wang Zhen</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : true,
      notify     : true,
      appId      : 'XnOon4MAqmL0Li6MykTmnsGH-gzGzoHsz',
      appKey     : 'GumdfwNMNMtwCdHQO6IjvtuO',
      placeholder: "Would you like to leave a message?",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
